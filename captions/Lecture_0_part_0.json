[{"text":"okay, good morning class, how are you","width":256},{"text":"I'm good thank you","width":256},{"text":"alright, for those of you that weren't paying attention, cs241 has started. good morning class, how are you?!","width":320},{"text":"alright, great. so, in the next 15 minutes the game of course is for you to leave this room with more passion for system programming and maybe some more knowledge about how to do it as well","width":768},{"text":"and maybe some knowledge about how not to do it as well","width":128},{"text":"so one of the intents here is cover gotchas and common programming mistakes","width":256},{"text":"so, if you have a burning question, there's probably someone else in this room that has the same question","width":320},{"text":"I will endeavor to answer as many questions as possible without derailing the lecture","width":256},{"text":"so feel free to speak up","width":192},{"text":"if it's not appropriate, I will tell you","width":192},{"text":"and, just stay, come down and talk to me afterwards","width":64},{"text":"also, I hold office hours usually three times a week immediately after lecture","width":448},{"text":"because I figured thats the best way to reach most of the students","width":128},{"text":"so feel free to stop me","width":128},{"text":"I may not be able to stay for a full hour every time","width":256},{"text":"for example, there's a faculty meeting today where we're talking about how to take over the world","width":128},{"text":"uiuc style","width":128},{"text":"but most times I'm there to help you","width":320},{"text":"and I love to see people progress. its fantastic stuff from the beginning of the course","width":320},{"text":"we don't anything till the end where you can actually do some pretty cool things","width":320},{"text":"and by the way, last semester many students came to me to say \"hey! you know what? I just had an interview and they asked me to explain X\" where X is a cs241 thing","width":640},{"text":"such as, what's the difference between a process and a thread?","width":192},{"text":"whats the difference between stack memory and heap memory?","width":64},{"text":"how would you do that?","width":128},{"text":"what's a common gotcha with this?","width":128},{"text":"why would a C program crash? that kinda stuff","width":256},{"text":"so you might find that the knowledge you gain in this class actually has an immediate impact for you outside of this class","width":320},{"text":"and if it does, wonderful!","width":192},{"text":"alright, so, let's get started with a couple of trick questions","width":384},{"text":"here we have here, wanna go to overhead, right!","width":320},{"text":"okay! how do you look up information for C library calls and system calls?","width":128},{"text":"easy! okay, here's the beautiful thing. with POSIX, POSIX includes many things","width":768},{"text":"it includes an API (application programming interface) in other ways, instead of calls, you can call","width":448},{"text":"and also, a manual of man pages about those calls","width":256},{"text":"so guess what? we're actually going to look up different calls","width":448},{"text":"the art of course is knowing which calls you should use","width":64},{"text":"and the POSIX man pages aren't going to tell you that","width":320},{"text":"you already have to have a basic idea of \"oh yeah! I need to use open\" or \"or yes! I need to use write or stat or lstat or fork()\"","width":576},{"text":"so that's the main thing you're going to get out of this course is the vocabulary","width":448},{"text":"with the then end expectation that you would actually then start to use this stuff and look it up","width":64},{"text":"so we've got two different kinds of things. we've got C library calls and system calls","width":320},{"text":"the C library is the heart of your process","width":448},{"text":"okay, what's the difference between a program and a process?","width":128},{"text":"well, the program is the code that you've written turned into bytes which say you stored on disk","width":320},{"text":"and then when you actually execute it, or actually run it, it becomes a process","width":320},{"text":"and of course you can have multiple processes running for the same piece of program code","width":192},{"text":"but part of that process is the C library","width":192},{"text":"it comes kind of bundled with or loaded at runtime and it's a set of code and maybe some constants too that just runs as part of it","width":640},{"text":"so what kind of C library calls do we have? well for example, perhaps you want to do a string copy where you want to say \"okay, copy all the bytes into a destination from a source\"","width":704},{"text":"and we're gonna pass two pointers and it will keep copying those bytes starting from source into destination until what?","width":512},{"text":"until it reaches a zero byte","width":256},{"text":"because that's the definition of a C string","width":192},{"text":"of course, bad things might happen if you accidentally put there in the wrong order","width":320},{"text":"alright, if you tried to copy from some arbitrary place into a different place, who knows how many bytes its gonna copy before it gets to zero? oops.","width":576},{"text":"who knows where its going to immediately crash your program?","width":192},{"text":"for example, it might be that you try to write into some read only memory","width":320},{"text":"and the hardware say \"ah ah excuse me? excuse me? you see that process over there? it's being a baaad baaaaad process\"","width":448},{"text":"ok lady gaga I might","width":64},{"text":"so, look I enjoyed that joke personally","width":384},{"text":"so, let's um, this is an example of a C library call. it doesn't need to go into the system to run this","width":640},{"text":"we can do this entirely inside the process space","width":192},{"text":"inside the virtual memory of our proces","width":128},{"text":"ok, what about system calls? well, here's an example of one, you've already seen it: \"write()\"","width":512},{"text":"we want to get outside of our system. we want to break out of our system and get the system to break outside of our process and do something","width":384},{"text":"to the rest of the world","width":64},{"text":"okay, so, the system itself needs to handle that particular call","width":384},{"text":"and in fact it does that using a hardware interrupt","width":320},{"text":"that's the red pill, if you follow the matrix movie","width":256},{"text":"that's how you escape out of the box. out of the sandbox that your poor little process is stuck inside","width":512},{"text":"anyway, so we want to look up say some information about these and so for that we can use \"man\"","width":384},{"text":"which reads man pages","width":128},{"text":"which are incredibly terse and utterly useless if you dont have some basic knowledge","width":384},{"text":"but pretty useful if you already know something about what you intend to do","width":384},{"text":"so let's try one","width":192},{"text":"box pc","width":64},{"text":"okay so let's try looking up for example \"printf()\"","width":768},{"text":"and there it is","width":64},{"text":"it's in section 3 of the man page","width":192},{"text":"okay yeah, we want to open it. there it is","width":64},{"text":"now what do we see about these man pages? well the things I want to show you is that first of all it tells you what includes you better have","width":384},{"text":"it also includes a whole load of function calls which do similar things","width":320},{"text":"so, as well as printf, we've got sprintf or snprintf","width":320},{"text":"and, then we've got some really terse information on what it's gonna do","width":384},{"text":"and usually its got a return value as well","width":192},{"text":"so they might return say the number of characters printed","width":384},{"text":"excluding the NULL byte used to end output strings","width":192},{"text":"notice how those display little parenthesis here as if its not that important","width":256},{"text":"as if the number of bytes written is not that important to you","width":256},{"text":"as if that could never cause a big program to fail","width":256},{"text":"accidentally, you might assume that that is the actual number of bytes","width":256},{"text":"written. but no no no, it excludes it and it's an off by one error","width":128},{"text":"it's actually going to ignore the fact that it may have written a zero at the end because it's the end of a C string","width":512},{"text":"oops! that's exciting.","width":64},{"text":"you may have not had enough memory. you may have overwritten something else","width":448},{"text":"so, what you read man pages, read them slowly and try to understand everything they say","width":384},{"text":"and of course, it's always useful to find an example","width":256},{"text":"oh, this one actually has one, look at that! amazing","width":256},{"text":"most of them don't bother with an example","width":128},{"text":"so you end up doing any google search to say \"okay, easy example of blah blah blah blah\"","width":320},{"text":"so they're a good reference material","width":192},{"text":"so you'll notice we had different sections","width":128}]