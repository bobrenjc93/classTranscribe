[{"text":"why did we not find it?","width":64},{"text":"oh because I want to go into... oh","width":640},{"text":"cd cs241","width":512},{"text":"okay good, right, we're in the right place","width":256},{"text":"okay, so we talked about file globbing","width":512},{"text":"and uh, oh yes here's another little useful command","width":384},{"text":"let's have a look at, say the timestamp for mmap","width":320},{"text":"and you'll see I made it this morning at 10:46","width":448},{"text":"yeah, I was busy just before lecture","width":192},{"text":"I can change that timestamp","width":320},{"text":"just by calling touch, so if I say touch, and here's the file","width":320},{"text":"oh I cannot touch it, why?","width":320},{"text":"who owns the file?","width":384},{"text":"root, right, and","width":192},{"text":"only root has read and write permissions","width":128},{"text":"okay, so, let's become root, alright, so I can do sudo, and that will give me root permissions","width":384},{"text":"I'm going to do sudo -s because I want to stay as root","width":256},{"text":"alright, then, let's touch that file","width":384},{"text":"and if we do that","width":128},{"text":"wait we've just updated the timestamp","width":640},{"text":"so why would that be useful with make?","width":192},{"text":"what does make use?","width":768},{"text":"the makefile, yes, and inside of the makefile you write rules","width":384},{"text":"and those rules depend upon the timestamps","width":192},{"text":"it compares the modified time of the executable, or the output of each rule","width":320},{"text":"and all of the sources","width":256},{"text":"so, if we've touched our input file, then we can force make to","width":320},{"text":"upremake any executables or libraries that depend upon this file","width":128},{"text":"so useful, for example, if you've just changed your compiler options","width":320},{"text":"say if you wanted to add a debug flag, and rather than, say","width":320},{"text":"doing make clean or manually removing stuff","width":256},{"text":"just simply updating the timestamp is sufficient","width":128},{"text":"by the way, with make, you're not limited to just setting the timestamp at the current time","width":576},{"text":"you could even set it tomorrow, so you could say","width":192},{"text":"\"Hey, look, my homework wasn't done until tomorrow\" or something","width":64},{"text":"so, you could actually modify the other timestamps","width":256},{"text":"but we won't play with that today","width":64},{"text":"but there's just a cute little useful tool sometimes to be able to modify the meta information about the file","width":448},{"text":"let me make a new file, okay, so here's a new empty file","width":768},{"text":"and this file only has the permissions of read and write for root","width":512},{"text":"let me check my umask","width":256},{"text":"that's actually a poor demo, because root is special","width":704},{"text":"I'm going to get out of being root","width":192},{"text":"let's make another one, touch empty","width":320},{"text":"okay so here's a better demo, root is a special case","width":384},{"text":"so when I make a file normally, I have read and write permissions","width":320},{"text":"and so does my group","width":64},{"text":"and everybody else does not have those permissions","width":192},{"text":"why is that? in part it's to do with my umask","width":320},{"text":"where the umask is one of the options that controls","width":320},{"text":"what permissions are taken away from a file","width":320},{"text":"so if I change my umask","width":256},{"text":"to be 777, I can subtract everything from those files","width":448},{"text":"let me make another file now, and look at that","width":192},{"text":"now we haven't got any permission to read this file at all","width":256},{"text":"or write it, or execute","width":192},{"text":"umask is a subtractive operation, it masks out some of the default bits that","width":256},{"text":"we would have otherwise set on the permissions of each file","width":256},{"text":"it's not the only thing that controls the default permissions of new files","width":192},{"text":"but it is part of your process","width":320},{"text":"so I'm playing with this inside of the shell","width":64},{"text":"but we could also do this inside of a C program aswell","width":192},{"text":"and so if you want to securely create a set of files","width":576},{"text":"where you don't want anyone to be able to, say, read them","width":128},{"text":"or you're going to create a lot of files then","width":128},{"text":"setting umask first is a good security operation","width":256},{"text":"you're subtracting the bits that you don't want set so","width":384},{"text":"in this case I said \"hey, take everything off, we don't want read or write or anything\"","width":192},{"text":"if I had said umask, let's do 600","width":448},{"text":"what have I done now?","width":512},{"text":"I've taken my own bits off","width":64},{"text":"[gibberish]","width":192},{"text":"but I've let through the group and the world access rights","width":384},{"text":"so what's a typical umask? a typical umask is 022","width":384},{"text":"that's a typical default value. What does that do? What does that subtract?","width":384},{"text":"remember we're thinking in octal, so each one of these values","width":448},{"text":"remember, is read write execute combined into an octal number","width":256},{"text":"so for ourselves we're subtracting nothing, but what about the group and others?","width":320},{"text":"we're subtracting write","width":256},{"text":"we don't want anyone to write our files by, anyone else to write our files","width":320},{"text":"if you actually read the manpage of write and other things you'll actually find references to umask","width":640},{"text":"so here's one other piece that controls the creation of files","width":192},{"text":"it does not effect existing files, it's only during the creation of new files and new directories","width":448},{"text":"it also creates, effects directories","width":384},{"text":"so let's play with this","width":128},{"text":"I will make a new direction","width":320},{"text":"So let's turn everything off (evil laughter)","width":192},{"text":"and I'll make a subdirectory","width":256},{"text":"and I will try to make inside subdir1","width":384},{"text":"another file, so mydata.txt","width":448},{"text":"oh, I get permission denied, I cannot write into the contents of this directory","width":384},{"text":"why not? because we took the execute bit","width":256},{"text":"off the directory, so here's something a little strange","width":256},{"text":"the execute bit for a directory means, can I actually see the contents of the directory","width":448},{"text":"not the name of the directory, because that's not part of the actual directory","width":256},{"text":"but the name of the directory is back inside of the closing directory, in the parent directory","width":384},{"text":"it's, can I actually open the directory and look inside and see what files are stored there","width":320},{"text":"so I couldn't go into subdir1","width":256},{"text":"and in fact if I tried to list the contents of subdir1","width":256},{"text":"I get \"No! you can't open that directory!\"","width":128},{"text":"because it's not executable","width":192}]