[{"text":"alright good morning class how are you","width":384},{"text":" alright let's try again, good morning class how are you","width":64},{"text":"alright so here's what we are gonna do for the last lecture we look to making a TCP client  ","width":384},{"text":"we made a socket and we ask the socket to connect to a remote server","width":256},{"text":"we connected it to Illinois.edu and we connected it to BBC.com, this time","width":256},{"text":"this lecture what we are gonna now is to go to the [something] of the equation and we are gonna make a TCP server, and I'm gonna walk you through the steps and some of the gotchas of [something]","width":704},{"text":"so we'll talk about some of the nitty bitty of the code","width":320},{"text":"and although we'll put it all together and ask you about the server","width":192},{"text":"ok sounds like a plan, ok let's get started","width":192},{"text":"before we do that, let's see how much you remember from last lecture","width":320},{"text":"alright so what do we need to do to set up a client TCP socket","width":320},{"text":"ok so here we go um so","width":192},{"text":"back in this time","width":192},{"text":"get address info didn't really exist","width":192},{"text":"and we have to carefully setup a struct","width":128},{"text":"um but fortunately for us today, getaddressinfo does exist","width":192},{"text":"so the first thing we might do is um","width":320},{"text":"we'll use get address info, so how do we do that","width":128},{"text":"well we setup um a hint set up...","width":384},{"text":"the um....","width":128},{"text":"addressinfo struct","width":192},{"text":"","width":320},{"text":"and we'll setup the hints","width":256},{"text":"another intended use for this getaddressinfo we are just gonna pass it into getaddressinfo and so here's the thing that we care about","width":576},{"text":"like we really want a stream based protocol","width":192},{"text":"hey we wanna use IP 4 or we wanna use IP 6 or we um or we don't care we'll use either","width":704},{"text":" so anyways we said about our struct like we are doing down here we said about we are configuring it","width":320},{"text":"um we could get address info","width":192},{"text":"to setup the [something] struct, and","width":256},{"text":"then we can use it so now here's the um","width":192},{"text":"here's the main part","width":192},{"text":"write a socket","width":256},{"text":"call connect","width":192},{"text":"so in a sense","width":128},{"text":"making a client actually requires two calls","width":320},{"text":"get a socket and ask that socket to connect to something","width":128},{"text":"that's not quite true because we are using this getaddressinfo to help us make the connect call","width":384},{"text":"but this is the actual part, if we actually know exactly what we wanted to put","width":256},{"text":"set it to connect, we won't need to be calling getaddressinfo","width":192},{"text":"that's just a helper method for us","width":128},{"text":"actually it's just these two calls: hey i want a socket, and hey please connect to somewhere. please connect to BBC and here's the IP address. right","width":576},{"text":"alright so um","width":256},{"text":"last semester","width":192},{"text":"no, last lecture","width":128},{"text":"i lied to you","width":64},{"text":"just a little bit","width":128},{"text":"i said getaddressinfo returns a struct of these addressinfo objects. well that's kind of true","width":832},{"text":"actually, it returns a linkedlist of them","width":320},{"text":"so here's what happens, you say, look","width":256},{"text":"i will like a certain kind of connection, like, i would like, say, IP 4, for example","width":576},{"text":"and i would like, say, a stream based port for, say, TCP","width":320},{"text":"getaddressinfo says, okay you wanna get this remote host, i will find all of the possible ways","width":576},{"text":"to set up a socket and connect to the remote host and return it to you","width":256},{"text":"and that's what we get, we get a whole lot of these addrinfoes","width":256},{"text":"now and for our little code inside CS 241, don't worry about that, just use the very first one that it gives back to you","width":320},{"text":"assuming of course that getaddressinfo gives us a success","width":320},{"text":"result code","width":128},{"text":"but if you are writing a more verbose server, you might say i wanna connect to the BBC","width":192},{"text":"and i don't care if you can find a good IP 4 connection or good IP 6 connection i know what i'll just try both","width":512},{"text":"alright so, in fact you get this linkedlist","width":448},{"text":"alright so what have we got inside this addrinfo ","width":192},{"text":"alright we've seen these um, this half up here which is kind of a description of what we want","width":384},{"text":"this is the stuff that we are probably gonna be using in our code later on","width":320},{"text":"and that is this structure here, sockaddr","width":320},{"text":"and also the number of bytes in that address","width":192},{"text":"so you'll be seeing us passing those addresss. so you'll be seeing us passing those two fields","width":192},{"text":"into our connect call and our bind calls in a little bit","width":256},{"text":"ok so watch out for these, so this is the stuff that is setting up for us so we don't need to set up","width":384},{"text":"ok alright so we got our addrinfoes","width":320},{"text":"alright so","width":192},{"text":"how many addrinfoes does it return? 0, 1 or more?","width":384},{"text":"i promise you that we'll never return you a negative number","width":64},{"text":"OK um. ","width":320},{"text":"one little thing that you might notice on the code before which is that if getaddressinfo fails","width":384},{"text":"you could use perror() or structerror","width":704},{"text":"it doesn't set error number like that it's got its own error","width":320},{"text":"error code that you could use to return an error","width":256},{"text":"and we'll look that up in a bit","width":256},{"text":"instead i wanna charge through this [something] when we give this demo today","width":192},{"text":"the demo is the most fun","width":64},{"text":"but so what is AF_INET6?","width":128},{"text":"what kind of address family is this","width":128},{"text":"it is, yes, IP 6","width":512},{"text":"IP version 6. well we can talk about nodes we can talk about hosts, we can talk about machines","width":320},{"text":"using 128 bits of addressing","width":192},{"text":"in other words our address base is much larger","width":128},{"text":"alright so it's gonna take us a while to exhaust 2^128 possible addresses","width":384},{"text":"so IP version 6 was created because people foresaw the problem that hey we are starting to run out of addresses with IP version 4","width":896},{"text":"so what do you think this might be","width":576},{"text":"I'll give you a clue","width":256},{"text":"there's no place like home","width":640},{"text":"this is how we talk about our localhost ","width":192},{"text":"using IP version 6. so if you want to hack yourself using IP version 6, this is the address you need to connect to","width":512},{"text":"there is actually a shorthand for this where we can collapse the longest ones and zeros","width":448},{"text":"and so there the shortest version of this is just ::1","width":320},{"text":"i'm not gonna talk about all the [something] collapsing IP version 6 addresses","width":256},{"text":"you'll welcome to look them up but i guarantee you that they won't be on the exams. the wikipedia references is perfectly good enough","width":448},{"text":"if you ever need to actually need to talk about IP version 6 addresses","width":192},{"text":"but that's the shortest IP address IP v 6 address.","width":448},{"text":"and yes this might be on the exam or this should become acknowledged that hey, this is yourself and this is localhost","width":384}]