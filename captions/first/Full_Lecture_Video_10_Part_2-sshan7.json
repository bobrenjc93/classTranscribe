[{"text":"[long pause]","width":9088},{"text":"okay so let's have a look at the first one","width":64},{"text":"we have a flag and in this case, our flag represents an intent to go into the critical section","width":512},{"text":"because inside this while loop, we actually may lower our flag. we actually may say \"yeah, well, I give up. it's your turn\"","width":704},{"text":"so if I see your flag is raised, then if the turn variable is set to you, then I'm just gonna say \"okay, actually I'll let you go ahead\"","width":640},{"text":"so I'll lower my flag. I know then, therefore, that the other thread gets to win!","width":320},{"text":"they see my flag has gone down so they can go into the critical section","width":192},{"text":"but they're not going to raise my flag","width":320},{"text":"so before going into the critical section, my flag will always be raised","width":256},{"text":"alright, now I go around again","width":64},{"text":"so, let's go around again","width":128},{"text":"now, if it turns out that I've actually had to wait like I just did, then this time, it's my turn to win.","width":512},{"text":"so I'm not going to back down the second time. I am just going to now keep waiting until your flag goes down","width":704},{"text":"and because the turn variable is set to me, then I win this round","width":256},{"text":"I win this second time","width":128},{"text":"so I know that I can continue at some point","width":320},{"text":"at some point your flag will go down","width":128},{"text":"either because you've finished this other critical section or you've deferred to me","width":320},{"text":"so in fact, what we're looking at here is dekker's solution. so this is the first solution to the critical section problem","width":960},{"text":"and we're looking at, of course, the version which works for two threads","width":192},{"text":"but I hope you can see that the flag represents kind of an intent to be inside the critical section","width":704},{"text":"right then! so what about version two? yeah, we're raising a flag and this time, it's a kind of \"no no no, after you\"","width":640},{"text":"so now we have a little loop that we keep going around. if your flag is raised or its your turn, I'm just going to wait","width":640},{"text":"what do people think about this? candidate solution?","width":192},{"text":"no progress? no mutual exclusion? no bounded wait?","width":512},{"text":"no progress did someone say?","width":320},{"text":"alright so let's have a look. so, if I set the turn to you, and then I'm going to wait if its your turn","width":320},{"text":"well that's, that's like walking to the resource and just standing there because \"no, I want someone else to go in front of me. I'm scared\"","width":704},{"text":"I should be able to use the resource if its right there and no one else is using it. I want to have that piece of cake. I want to be able to enter the critical section","width":448},{"text":"so we've already identified the [something","width":192},{"text":"at least in terms of progress","width":192},{"text":"there's no progress here","width":64},{"text":"it gets stuck waiting for the other thread to come along and kick the turn variable back to the first thread or first process","width":512},{"text":"so, we've found a problem here: no progress","width":256},{"text":"alright, um, what about the third one? I'm gonna raise my flag, this time I'm being selfish, hey! it's my turn!","width":1024},{"text":"this is the toddler version of the critical section solution","width":384},{"text":"I see the cake. I want to eat it. it's mine. I saw it first","width":256},{"text":"alright so, I'm claiming set turned to me, and now I'm just going to wait while your flag is raised or it's your turn","width":512},{"text":"what happens here?","width":128},{"text":"so you could imagine, that we do want two and three, alright, so","width":704},{"text":"if there was no other thread, then great! we're going into the critical section","width":256},{"text":"alright, now we've cured the problem of no progress here. so let's see if we can make it a bit more interesting. suppose another thread comes along and raises the flag","width":1152},{"text":"now we have to decide who's going to set the turn variable last","width":256},{"text":"ok so, for now, let's try like this","width":320},{"text":"we'll set turn to me, and then the other thread says set turn to me","width":320},{"text":"so what happens now?","width":128},{"text":"the first thread says \"oh look! your flag is raised! I better wait!\"","width":384},{"text":"and what does the other thread do? \"oh look! your flag is raised! I'd better wait!\"","width":448},{"text":"it's like a four way stop sign in Wisconsin","width":320},{"text":"\"oh! I see you've arrived! I'll wait for you!\"","width":64},{"text":"that was not a Wisconsin accent, but you get the idea","width":384},{"text":"we start talking about cheese perhaps. but we got a problem that now both threads have claimed its their turn but we've reached a problem where they're both looking at each others flags and so we get stuck","width":896},{"text":"so we actually have deadlock. we've again showed the problem of we try to fix progress but we failed","width":576},{"text":"there is no progress here","width":192},{"text":"I'm going to make a little change to this program","width":192},{"text":"I'm going to say \"what would happen if this was an AND?\"","width":512}]