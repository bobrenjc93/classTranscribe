[{"text":"Okay right","width":64},{"text":"Question for your neighbor and yourself","width":256},{"text":"Does the inode contain the filename?","width":256},{"text":"Choose now","width":192},{"text":"Hundred internet points if you get the correct answer","width":256},{"text":"Okay","width":1024},{"text":"Right","width":64},{"text":"If you think the answer is ","width":256},{"text":"No, it's not part of the inode","width":192},{"text":"give yourself a pat on the back or or or or or","width":256},{"text":"shake hands with your neighbor alright?","width":128},{"text":"if you thought the answer was yes","width":192},{"text":"exits are this way and this way","width":192},{"text":"there are still majors look there are still majors looking for other people","width":256},{"text":"no it does not, remember okay? it does not","width":192},{"text":"the inode, the file does not know about it's own file name","width":256},{"text":"okay? that's the most important thing the most important point today we've got today okay","width":256},{"text":"and it allows us then to do  the following,","width":256},{"text":"i can have same file","width":192},{"text":"appear twice in my file system","width":256},{"text":"this seems impossible","width":320},{"text":"if you still think the file name is the file","width":320},{"text":"how can i get","width":256},{"text":"a file to appear twice?","width":128},{"text":"in two different places","width":128},{"text":"what do i need to do?","width":128},{"text":"yes","width":64},{"text":"I could yep hard link it. what's actually to my directory entries?","width":384},{"text":"Yes! thank you! remember my directory entries are just name inode number","width":704},{"text":"Somewhere over the mountain I've got two entries","width":256},{"text":"With a name1 that goes to a node1","width":192},{"text":"and another one","width":128},{"text":"in another directory I've got a name to and it happens to point to the same inode number","width":320},{"text":"I've better singing otherwise anyway alright so","width":256},{"text":"thank you","width":128},{"text":"I just made that up okay","width":128},{"text":"Yeah so look here's one directory remember all the directory is just some data","width":320},{"text":"it all that data is just a name and an inode number","width":192},{"text":"inside another directory we've got  a different name somewhere","width":192},{"text":"but it happens to point to the same inode number","width":128},{"text":"My goodness! So if I go into these two directories try to actually open the file,","width":256},{"text":"I open up this file","width":192},{"text":"and you can talk about this file when you talk about inodes","width":128},{"text":"and I start reading the bytes I'm talking about the same file","width":192},{"text":"That means if I change the content of this file","width":192},{"text":"then that file in that other directory changes as well why?","width":256},{"text":"because it's the same beep file","width":256},{"text":"okay?","width":128},{"text":"This looks impossible if you're sitting at the command line and you know","width":320},{"text":"you got two shells open and you're actually changing the contents of one file ","width":320},{"text":"and you've got another one other here","width":64},{"text":"and you cd-ed to a different directory ","width":64},{"text":"Oh my goodness! this is crazy, no it's not","width":192},{"text":"just remember this, it's just an inode","width":128},{"text":"we've just got two different places that happen to refer to the same inode number","width":256},{"text":"okay how do I do that?","width":192},{"text":"I can use a hard link","width":192},{"text":"How do I do that? There's a command called ln","width":576},{"text":"So link allows me to make another entry","width":448},{"text":"to an existing file","width":192},{"text":"let's see if I can pull up the manpage a moment","width":256},{"text":"So you type this into a terminal and congratulations you've now got two files, two entries","width":1216},{"text":"which point to the same inode","width":256},{"text":"so you could type say for example link","width":128},{"text":"hey here's my file slash home blah blah blah blah blah","width":256},{"text":"uh file1","width":64},{"text":"this better exists so it can pull out the inode number of that file","width":192},{"text":"and then go somewhere else uh blhblahblahhblah file different name","width":448},{"text":"alright so for this magic to occur, we want to be able to know when those disk blocks become available ","width":768},{"text":"for resuse, that means an inode has to do this","width":384},{"text":"has to some reference counting","width":384},{"text":"in other words, how many directory entries ","width":192},{"text":"actually refer to this inode","width":256},{"text":"if i reduce that down to 0","width":192},{"text":"nobody cares about me","width":128},{"text":"alright and we can resuse that inode and we reuse the disk blocks associated with the file","width":384},{"text":"so everytime you link, we're gonna increment the reference count, ","width":384},{"text":"everytime we link you add a hard link","width":192},{"text":"we implement the reference count","width":256},{"text":"now you might wonder, can i do this with directories as well","width":640},{"text":"right? could could my filenames here be directories","width":320},{"text":"and the answer is","width":192},{"text":"yes kind of","width":128},{"text":"no","width":64},{"text":"right","width":128},{"text":"so why yeah kind of no, here's why","width":256},{"text":"the operating system the repair tools","width":320},{"text":"all assume that directories are tree based structure","width":320},{"text":"if you are allowed to start messing with this hard links for directories","width":384},{"text":"you could violate that assumption","width":128},{"text":"you could set up a directory which has two paths","width":256},{"text":"you could set up a uh file system hierarchy","width":320},{"text":"which never ends right? you keep going into subdirectories and you come back round to the top somewhere","width":448},{"text":"and so all of the tools for following inodes wouldn't be to complete","width":256},{"text":"so i practice, filesystems typically prevent you from doing this","width":384},{"text":"right? even root cannot do this on most file systems","width":192},{"text":"the file systems C code says Hahaha no","width":192},{"text":"right nice try but no","width":128},{"text":"right so you can only do this with with regular files you can't do it with directories","width":320},{"text":"Right","width":320},{"text":"Questions?","width":128},{"text":"So what have we said? we just said that","width":256},{"text":"hard link is easy we just make a","width":192},{"text":"another entry inside a directory with a different name for the same inode","width":320},{"text":"and you can do it using this link tool, this link command","width":512}]