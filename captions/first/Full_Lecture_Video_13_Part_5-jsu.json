[{"text":"but the way you build your code will stop that from happening","width":1088},{"text":"are you getting close?","width":1152},{"text":"okay I'm hearing the mumbling die down you guys ready","width":1600},{"text":"anybody have a solution for me","width":64},{"text":"what's the sequence for nq","width":768},{"text":"okay I'm going to do the same way on s1","width":704},{"text":"why s1","width":128},{"text":"cause I have sixteen spaces and i want to wait if there are no spaces available","width":448},{"text":"so what do I initialize s1 to","width":192},{"text":"sixteen","width":128},{"text":"then what do i do","width":128},{"text":"lock","width":64},{"text":"what happens if i switch these two","width":384},{"text":"the order of those two","width":128},{"text":"okay I'm going have","width":256},{"text":"I'm breaking my synchronization I'll ask that again when we're don","width":192},{"text":"so then I do my enqueue","width":128},{"text":"how do I finish up?","width":320},{"text":"sorry?","width":64},{"text":"what should I do next?","width":192},{"text":"sorry?","width":256},{"text":"post ","width":128},{"text":"and then what? ","width":320},{"text":"unlock","width":192},{"text":"okay?","width":256},{"text":"what happens if uh is that the right order for those two?","width":320},{"text":"so he says he thinks the lock should be first","width":384},{"text":"why should the lock be first?","width":128},{"text":"you can let somebody else come in","width":384},{"text":"really you want your lock critical section ","width":320},{"text":"lock as tight as possible","width":256},{"text":"and then do other things outside that to manage your synchronization","width":256},{"text":"because you it's not going to be that bad for this small example","width":320},{"text":"but if you don't unlock until you do some other things","width":192},{"text":"you're locking somebody else out","width":128},{"text":"okay so if you release the lock before the post","width":192},{"text":"somebody else could come in and could be waiting right here","width":448},{"text":"remember because I got multiple readers can come past the wait","width":320},{"text":"up to sixteen if it's empty","width":192},{"text":"and then they all wait on the lock because only one is allowed in the critical section at the same time","width":384},{"text":"and then they're out","width":128},{"text":"once I step out of this","width":192},{"text":"the next one can acquire the lock and change something","width":256},{"text":"before the post happens","width":192},{"text":"so for the small pieces of code it's not really and issue","width":384},{"text":"for larger things you want to be careful","width":64},{"text":"okay so what's my dequeue","width":256},{"text":"so it's not a correctness issue it's a performance issue","width":128},{"text":"so what do i write for my dequeue","width":192},{"text":"wait on s2","width":256},{"text":"what's my additional value of s2","width":128},{"text":"zero because I have nothing in there","width":64},{"text":"and then I do what","width":256},{"text":"lock","width":64},{"text":"and then i do my dequeue","width":192},{"text":"then what do i do?","width":256},{"text":"unlock same reason","width":128},{"text":"and post which one?","width":192},{"text":"s1","width":64},{"text":"why does this work?","width":192},{"text":"I mean if you talk about this if you look at it right?","width":384},{"text":"the first thing is I'm coming in","width":256},{"text":"I'm saying are there any spaces","width":128},{"text":"if there's spaces I can put something in","width":320},{"text":"and now I'm telling the dequeue that I finished putting something in and now there's some items","width":448},{"text":"so same thing here","width":128},{"text":"I'm checking to see if there's any items","width":192},{"text":"and when I done I'm letting the enqueue know that there is more space if it was waiting for space","width":640},{"text":"so the key here is that the communication between the two","width":320},{"text":"is this crossover between s1 and s2","width":192},{"text":"our initial answer remember had just s1 on one side and s2 on the otherside","width":320},{"text":"there was no communication between the two to let them know that there was things changin","width":256},{"text":"and then our other answer just had them backwards","width":192},{"text":"again if I unlock and then post","width":1600},{"text":"alright first is somebody could be waiting on that lock","width":320},{"text":"the post just means somebody's waiting to know if there's more items","width":256},{"text":"the unlock says there's somebody waiting to get into the critical section","width":256},{"text":"but let's say there are five items in here right","width":576},{"text":"we'll say there's five items and I've called dequeue","width":384},{"text":"a bunch of times right so I've called dequeue the first time","width":192},{"text":"the first one goes through","width":128},{"text":"it says wait and it decrements it to four","width":320},{"text":"s2 is items right","width":256},{"text":"so it decrements it to 4 and it gets the lock","width":256},{"text":"and it could then post or unlock","width":256},{"text":"if the first thing it does is unlock","width":128},{"text":"the next one that was coming along here","width":192},{"text":"the next one came along and it blocked ","width":128},{"text":"it can't go anywhere","width":192},{"text":"it's not waiting for this post","width":128},{"text":"it's just waiting for the unlock","width":128},{"text":"so it's really just an ordering thing","width":256},{"text":"if there was more complexity to this system","width":128},{"text":"this mismatch could cause problems","width":320}]