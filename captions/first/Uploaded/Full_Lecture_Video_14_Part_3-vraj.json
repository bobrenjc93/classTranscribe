[{"text":"there's lots of different things you can do to deal with deadlock","width":512},{"text":"you can try to prevent it. this is probably the most expensive thing that you can do","width":512},{"text":"you have to understand exactly how your system exists. you have to understand all the states in your system","width":256},{"text":"you have to be able to look at it, run from algorithms on it and say that nothing in the system, no program, no application can cause deadlock","width":640},{"text":"to be able to do that, you have to be very,very pessimistic","width":384},{"text":"because even if we're dealing with the that aren't very nice, if two of them never met, it's never gonna be a problem.","width":576},{"text":"so only if they actually meet that they cause deadlock","width":192},{"text":"a number of systems might try to do something like detection and recovery","width":320},{"text":"so detected that there was deadlock and now we're gonna come up some algorithms to recover from it","width":448},{"text":"a way that this is kinda somewhere in between. we're gonna look at our system and come up with systems that don't come up with dealdock","width":768},{"text":"a little bit more expensive than detection","width":256},{"text":"not quite as expensive as total prevention","width":128},{"text":"and then if you really have trouble you can have your system operator sit there and fix things that's your worst case","width":384},{"text":"does anybody know what unix/linux does","width":320},{"text":"for deadlock prevention","width":128},{"text":"or detection or avoidance or w/e","width":320},{"text":"anybody know?","width":64},{"text":"wanna take a guess?","width":256},{"text":"how does linux deal with deadlock?","width":128},{"text":"how many people think it does deadlock prevention?","width":448},{"text":"detection and recovery?","width":256},{"text":"avoidance?","width":128},{"text":"manual intervention?","width":256},{"text":"you wanna know what it does? nothing","width":192},{"text":"this is called the ostrich approach, you stick your head in the sand and pretend deadlock never happened. that is pretty much what they decide","width":896},{"text":"they leave it up to the application writers to make sure they never deadlock","width":64},{"text":"so, the nice thing about this is that none of the expensive components of prevention or recovery or detection need to be implemented","width":640},{"text":"they just say everything's faster and if it's rare is it really worth the overhead?","width":448},{"text":"the assumption is that it's rare and we're not going to use it or if it's really important for a particular application that that application take care of it","width":576},{"text":"that being said you can't ignore it because it's part of this class and i'm gonna talk to you about how to figure out what's going on with deadlock","width":512},{"text":"to be able to do so","width":256},{"text":"i wanna be able to model ","width":192},{"text":"i wann be able to model my processes and my resource that they wanna use in a graph and this is called a resource allocation graph","width":1024},{"text":"and my resource allocation graph has two components","width":256},{"text":"it has ","width":128},{"text":"it has processes which are these circles ","width":512},{"text":"and it has resources which are the squares","width":320},{"text":"and what i'm gonna do is i'm going to take an arrow","width":384},{"text":"from a resource to a process","width":256},{"text":"that means that p1 is using r1","width":256},{"text":"and i'm going to take an arrow from a process to a resource saying that p1 requested r2","width":704},{"text":"so this would be","width":128},{"text":"process 1 is using standard out","width":384},{"text":"process 1 has acquired a lock","width":192},{"text":"the second half, the right half would be","width":256},{"text":"some other process acquired a lock already and p2 is asking for it but doesn't get it until the other process has given it up","width":512},{"text":"so, why do we go through the bother of this well it turns out that if we look at resource allocation graphs they have this great property that tell us how to deal with deadlock or how to detect deadlock","width":1024},{"text":"let's say we have this situation now where r1 acquires, sorry, p1 acquires r1","width":832},{"text":"so process 1 has acquires some resource","width":192},{"text":"and p2 has acquired a different resource","width":128},{"text":"but now","width":128},{"text":"p2 is gonna request that first resource that p1 has and p1 is gonna request the resource that p2 had","width":704},{"text":"what's gonna happen?","width":192},{"text":"so, if they're gonna hold on to these resources and they can't make any progress until they get the second resource, we've now created something called circular wait they're both waiting for something","width":768},{"text":"the were each waiting for the other to move","width":256},{"text":"the cars at the intersection were each waiting for the other to move","width":320},{"text":"this is called circular wait","width":64},{"text":"and this type of cycle in a resource allocation graph tells us that there's dedlock","width":576},{"text":"so, on your handouts from today, you guys have some examples that we're going to go through","width":448},{"text":"so let me switch over to our examples","width":192},{"text":"can you guys see that okay or do you want me to put it on the center screen too?","width":640},{"text":"so, i'll help you through the first one","width":832},{"text":"here's my boxes","width":256},{"text":"and lawrence was calling them candyboxes and they hold candy","width":320},{"text":"and there's one piece of candy in the box and whoever gets it get's to take it and i guess when they're done they put it back. kinda gross","width":512},{"text":"so if you heard him say candyboxes he meant the resource squares and the resource allocation boses","width":320},{"text":"now how many processes do i have","width":384},{"text":"i have process 1 and process 2 so i'm gonna write p1 and p2","width":320},{"text":"and the way i read this is process 1 requests resource a and resource b","width":512},{"text":"so process 1 requests it and there's no arrow coming out of the resource","width":384},{"text":"that means that no one's using it right now and p1 can acquire it so i draw an arrow to p1","width":448},{"text":"because that means that p1 has acquired","width":192},{"text":"a","width":192},{"text":"andb","width":64},{"text":"now,","width":128},{"text":"process 2 comes along so this is time","width":256},{"text":"for each of these, down is time","width":320},{"text":"now p1 says i'm gonna request ","width":64},{"text":"oh i guess there's a 3rd one here","width":192},{"text":"p2 requests process c sorry process 2 requests resource c, which way does the arrow go?","width":640},{"text":"to p2","width":192},{"text":"towards p2","width":192},{"text":"and, what about b?","width":128},{"text":"which way does the arrow go?","width":192},{"text":"towards the resource or towards the process?","width":256},{"text":"towards the resource because a already has it","width":192},{"text":"is there a deadlock here?","width":192},{"text":"no why not?","width":192},{"text":"there's no cycle i don't have my circular wait","width":384}]