[{"text":"okay sounds like we got a little situation over here okay what have we got?","width":576},{"text":"[somethin] okay","width":576},{"text":"uh so what do we mean by that? what could possibly go wrong?","width":256},{"text":"okay right yes exactly, both of them could raise their flag at the same time","width":576},{"text":"not very likely I agree, but it could happen right?","width":256},{"text":"both of them could raise their flags first before continuing","width":128},{"text":"and then they check each others' flags ","width":128},{"text":"oh look over there that other thread has their flag raised, i better wait","width":320},{"text":"and they both do that","width":192},{"text":"both threads or both people now just are stuck forever waiting for the other thread to lower their flag","width":448},{"text":"this would be an oops moment right?","width":256},{"text":"so clearly this is not going to work for us","width":192},{"text":"this would not be a good implementation for mutex lock and unlock","width":320},{"text":"we can get stuck","width":256},{"text":"what have we got?","width":192},{"text":"so this will become deadlocked","width":576},{"text":"we can't make any progress","width":192},{"text":"right so let's try this one","width":640},{"text":"this time we're going to have not some flags because they don't seem to be working for us","width":640},{"text":"let's have the british solution we'll say no after you","width":256},{"text":"so we're going to say something like look we'll have this shared variable so turned is shared between us","width":704},{"text":"so we can take turns","width":128},{"text":"and i'm just going to wait until turn is set to my id","width":512},{"text":"and then do the critical section stuff","width":128},{"text":"and similarly you're going to do the same, you're going to check the shared variable that you share between us","width":320},{"text":"so there's not two turn variables there's just one in global memory somewhere","width":256},{"text":"and see if it's set to my id","width":128},{"text":"and I'm going to wait until it is okay and when it is I can do my critical section stuff","width":320},{"text":"and then i'm going to say okay it's your turn","width":192},{"text":"right what do you think of that solution","width":320},{"text":"is it any good","width":64},{"text":"yeah we're just considering this for just two threads","width":384},{"text":"right we'll worry about generalizing this to more than two later","width":384},{"text":"[pause]","width":2176},{"text":"okay so could this lead to say data corruption?","width":320},{"text":"could we have two threads inside the critical section at the same time","width":256},{"text":"no, right it's impossible to continue unless you have the golden chalice ","width":576},{"text":"unless the turn variable has been given to you","width":128},{"text":"so hurray we have mutual exclusion again","width":384},{"text":"it's satisfied!","width":256},{"text":"alright but our critical section now is only going to have one thread at a time inside the critical part of the code","width":448},{"text":"two threads are not going to try and update our goal value or change the data structure at the same time or try to read it whilst another one is writing it. fantastic! we're done.","width":640},{"text":"but what's wrong with our solution?","width":256},{"text":"yes?","width":320},{"text":"okay it's not going to work if we add more threads to it uh but it is something that will run with just two threads","width":384},{"text":"uh if they try and update at the same time, let's have a look, so we'll let the first one go through and then a second one comes through","width":896},{"text":"but you're along the right lines, it's like what will happen if this thread actually wants to continue","width":512},{"text":"it can't! it has to wait for the first thread to actually do something","width":192},{"text":"yes, they become rate locked","width":192},{"text":"it's as if you and I have to use the bathroom at exactly the same rate, no it's your turn... oh i have to wait","width":320},{"text":"I have to wait to use the bathroom... no one's in it","width":192},{"text":"yes? but I still have to wait for you to use it","width":192},{"text":"there is something broken with this picture","width":128},{"text":"so what we have is a problem","width":384},{"text":"of let's see I think...","width":384},{"text":"uhhh I have to look at the definitions, just a moment","width":256},{"text":"oh yes, progress","width":320},{"text":"there's no progress","width":448},{"text":"if no one's inside the critical section, I should be able to enter it","width":448},{"text":"so in fact there's three desirable properties that we need here","width":640},{"text":"and we've touched on two of them","width":128},{"text":"so what we'd like in our solutions is mutual exclusion, that one's pretty obvious yeah? we only want one thread or one process to be able to continue","width":832},{"text":"into the critical section","width":128},{"text":"the next one is progress","width":640},{"text":"so if there, I'll write it in terms of threads, if there are no threads inside the critical section we should be able to enter immediately","width":2688},{"text":"or with the bathoom analogy, if there's no one in there I should be able to just use it","width":768},{"text":"I don't want to have to wait for you to give me a chain of keys each time","width":256},{"text":"the resource is not being used, I should be able to use it","width":256},{"text":"the last one is something called bounded wait","width":384},{"text":"and I'm going to give a non mathematical definition of bounded wait, there's more technical definitions","width":320},{"text":"that you might use in later courses","width":128},{"text":"that I should be able to get into the thread... the thread can enter the critical section in a finite amount of time","width":2048}]