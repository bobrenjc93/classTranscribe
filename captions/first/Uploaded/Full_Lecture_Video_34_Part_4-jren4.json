[{"text":" alright so we've got five threads walked into a barrie ow!","width":384},{"text":"what do we have going on here? well each time they walk into a barrier, they try to wait on A and then they increment a count","width":640},{"text":"if the count is something, hey let's post to the other semaphore","width":256},{"text":"and then let's always post to something else","width":320},{"text":"so this first semaphore sA looks like it's being used to define a critical section","width":576},{"text":"why should this be inside the critical section?","width":384},{"text":"we only want one thread at at time to be incrementing count or checking its value","width":448},{"text":"so if we make this post back to A","width":256},{"text":"then we can ensure that one thread at a time is incrementing the count so we can't have a race condition","width":448},{"text":"so that suggests the first value of sA is what?","width":384},{"text":"one, yes!","width":128},{"text":"so we allow one thread through but if another thread comes at the same time, it's forced to wait until the first thread has posted","width":512},{"text":"right so we're doing one at a time","width":320},{"text":"right now we said five threads so this is going to be if our count has gone up to five","width":448},{"text":"because we were doing it after we've incremented the count","width":256},{"text":"what do we do? we post to sB","width":128},{"text":"this suggests if I want my early threads to wait...","width":704},{"text":"maybe I should set this to zero","width":448},{"text":"because why don't i wait down here","width":256},{"text":"and I'll wait until that count is incremented to one","width":576},{"text":"okay does this code work?","width":320},{"text":"does it let through any threads before the fifth thread arrives?","width":320},{"text":"can any threads get through? if I send it four threads can any of them get through?","width":512},{"text":"where do they get stuck?","width":192},{"text":"yeah the sem_wait waiting for sB so the first four threads get stuck at that line","width":640},{"text":"all waiting for the count to go up by one","width":256},{"text":"but on the fifth thread we call sem_post great we're done right? our code is complete. actually what happens instead?","width":320},{"text":"yeah one thread is lucky","width":192},{"text":"the other four not so much, one thread is going to say great I was able to continue","width":512},{"text":"the other four of course are going to wait forever","width":192},{"text":"but there's something we can do to that one lucky thread","width":256},{"text":"that is going to give us a domino effect right? and that is what?","width":320},{"text":"let's sem_post","width":256},{"text":"so as that thread walks out the door, it bumps up the count again","width":320},{"text":"freeing the next prisoner","width":192},{"text":"that prisoner, that thread walks out, bumps up the count, freeing the next prisoner and so on and so on until we have all five threads have left our barrier","width":576},{"text":"so that's correct code, what would have happened if we had switched these two around?","width":896},{"text":"perhaps you can explain it to your neighbor and decide if your neighbor's explanation is any good","width":1280},{"text":"so what would happen","width":192},{"text":"there's not a barrier anymore, yes, before we called sem_wait we've added one to the count so now every thread will simply get through the moment it arrives so it'd be a useless barrier","width":832},{"text":"alright thanks for playing today's review questions","width":192},{"text":"right so let's talk about some other stuff","width":128},{"text":"first of all Monday I'm leaning towards having no quiz on Monday, no more quizzes","width":576},{"text":"but I'd like to just take a quick survey, if you would like one more quiz this semester on Monday","width":448},{"text":"do this, this way, if you'd like no more quizzes for the rest of the semester... do that","width":384},{"text":"Yes I'll still be dropping three","width":448},{"text":"the last quiz will be a quiz of all possible questions","width":448},{"text":"okay is that sufficient information for you to be able to make up your minds","width":384},{"text":"are you ready? go","width":128},{"text":"[something] has it, there were more people pointing in that direction","width":576},{"text":"so there will not be a quiz next week, no more quizzes","width":256},{"text":"right the next thing we'll talk about yes","width":256},{"text":"you can generate your own quiz simply by concatenating all possible PDFs","width":768},{"text":"okay so let's see we've got...","width":448},{"text":"we've done MP deadlines, streaming sort, oh yes right","width":256},{"text":"section tomorrow, section there is no prep for section, in section you will get your webserver finished","width":512},{"text":"we may add one small little thing to it as well and then the rest of the section time will be spent on MP development and MP finishing","width":512},{"text":"and MP questions","width":64},{"text":"plus there's an opportunity for you to give feedback on section experiences back to your course assistants etc","width":576},{"text":"so please come to section, also please bring your answers to section for points right? to get the four percent, bring your printed copies to section thank you very much","width":704},{"text":"right okay","width":256},{"text":"[silence]","width":768},{"text":"right once upon a time I had some data","width":192},{"text":"and my data arrived in chunks","width":192},{"text":"here it is","width":64},{"text":"there was a little callback that said hey I've got 256 numbers for you","width":256},{"text":"before returning, you have to copy those numbers out into your own area","width":576},{"text":"because by the time you return, that little buffer is going to be overwritten with the next set of numbers","width":384},{"text":"so that's the callback, to be given all of these, unfortunately you didn't know how many times you're going to be called back","width":384},{"text":"other than the fact that to make the MP simpler there was going to be 2^n number down here so it might be 4 6 8 16 32 etc etc etc","width":640}]