[{"text":"pthread_exit that just means no more for this thread","width":448},{"text":"that particular chef has walked out of the kitchen","width":384},{"text":"and will never come back","width":128},{"text":"so before you call pthread_exit","width":256},{"text":"make sure your thread has cleaned up any resources that it might have acquired","width":320},{"text":"questions?","width":128},{"text":"yes?","width":128},{"text":"ok so umm when a thread finishes","width":640},{"text":"it can finish in two different ways, it can..","width":128},{"text":"call pthread_exit","width":192},{"text":"or can return","width":256},{"text":"they are actually equivalent","width":128},{"text":"so this is a way to send some information back to the rest of the process","width":640},{"text":"and we had an example down here calling pthread_join","width":320},{"text":"and saying \"what did that thread say at the end?\"","width":128},{"text":"and you don't have to use this mechanism","width":192},{"text":"is actually common to make a struct and pass that to pthread_create","width":448},{"text":"That's the purpose of pthread_exit and this return here is that you can get the exit value","width":896},{"text":"let's say that you wanted more than just a void pointer","width":128},{"text":"what we can do here is","width":320},{"text":"define some sort of struct","width":128},{"text":"umm i won't bother the struct definition","width":192},{"text":"i'll say hey, let's have some memory and i'll call it \"my to do struct\"","width":640},{"text":"ok so","width":128},{"text":"calloc( sizeof(todo)) and i just need one of them","width":448},{"text":"and then i would set..oops","width":448},{"text":"set things up on this","width":64},{"text":"hey like..umm..","width":192},{"text":"you know.. start.. blah blah blah","width":128},{"text":"please stop..umm zero","width":192},{"text":"exit value in here","width":64},{"text":"so i could use this struct","width":128},{"text":"because both my main program and my thread that knows about this struct","width":256},{"text":"cause i can..","width":128},{"text":"pass in it","width":64},{"text":"so that allows me to assemble a whole body of information that i want to pass to the other thread","width":384},{"text":"ok let's get back to our little questions here","width":448},{"text":"why would you call pthread_exit in your main method","width":192},{"text":"well, this is typically done in kind of simple or small programs","width":320},{"text":"where we say most of the work is actually going to happen by all of my other threads","width":192},{"text":"and my program can finish after all of those other threads have finished","width":320},{"text":"so we would do this if there was no clean up in the main thread","width":512},{"text":"and we'll be happy just to wait","width":448},{"text":"until","width":320},{"text":"all thread are done","width":256},{"text":"so this is equivalent of saying hey last person out of the kitchens turn out the lights","width":576},{"text":"and the process will finish","width":64},{"text":"so i gave you two ways that a thread can be terminated just now, i said it could return from its function","width":704},{"text":"so.. we could .. return a value and i gave you that 0x12345 thing","width":384},{"text":"so..","width":64},{"text":"if you return from the function that was originally started by the thread","width":384},{"text":"i also showed you that you could call pthread_exit","width":192},{"text":"apparently that's four ways","width":320},{"text":"What other two ways might a thread exit?","width":192},{"text":"and i have mentioned them already in this lecture","width":192},{"text":"yes!","width":640},{"text":"yes! if someone calls pthread_cancel() on that chef","width":256},{"text":"they're done, okay yes","width":128},{"text":"so if a thread is in a cancelled state, it may exit","width":256},{"text":"and how else might a pthread ... yes?!","width":256},{"text":"yeah, the whole process dies","width":192},{"text":"so if another thread for example, segfaults","width":192},{"text":"THAT'S IT FOR ALL OF YOUR PROCESSES","width":128},{"text":"segfaults if like blurring up the entire chemistry lab or the entire kitchen","width":384},{"text":"the whole thing is gone","width":64},{"text":"the whole process is gone","width":64},{"text":"we need a valid process in order for our threads to finish","width":192},{"text":"let's talk about pthread_join","width":256},{"text":"it actually has two purposes.. we can wait ","width":320},{"text":"for a thread to finish","width":320},{"text":"and get its exit value","width":192},{"text":"the other thing it does is..free up resources","width":640},{"text":"okay what resources might that be?","width":640},{"text":"well","width":128},{"text":"every thread has some space in its process memory for its stack","width":384},{"text":"and every thread has an exit status, an exit value","width":256},{"text":"the library is going to keep them around","width":320},{"text":"because who knows, someone will call pthread_join on the thread","width":256},{"text":"so we can only release those resources after pthread_join has been called","width":384},{"text":"if you're writing a short simple program and you don't about these things then fine","width":320},{"text":"but when you want to write longer running programs that don't have resource leaks","width":192},{"text":"you should call pthread_join on every process, i mean, every thread yes","width":320},{"text":"so pthread_cancel, you're giving a chef another thread the marching order to say hey leave","width":1024},{"text":"okay. I'm canceling you, i don't want any more of your work","width":192},{"text":"I'm canceling..you know that stuff i told you to do? don't do it anymore, okay?","width":256},{"text":"so..","width":192},{"text":"pthread_exit says","width":128},{"text":"i'm done","width":64},{"text":"and by the way, here's my result","width":128},{"text":"and i ..","width":64},{"text":"so it's an act by the thread that says i don't want to do anymore work","width":256},{"text":"yes?","width":256},{"text":"yes!","width":448},{"text":"oh okay, right","width":384},{"text":"the point i was making here is..","width":320},{"text":"that you know that when you return from main, the process is done","width":192},{"text":"you know that when you call exit, the process is done","width":384},{"text":"okay","width":64},{"text":"pthread_exit has a supple part of the specification","width":320},{"text":"that says the main threads is finish, but the process continues until all threads are finished","width":1216},{"text":"corrrrrrect! yes","width":512},{"text":"so, if i called pthread_exit .. after printing eh","width":448},{"text":"hi","width":64},{"text":"right? now the process is done","width":128},{"text":"so it's the last chef out that turns out the lights to the whole process","width":320}]
