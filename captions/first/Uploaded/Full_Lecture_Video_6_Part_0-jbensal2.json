[{"text":" morning cs 241. how are you this morning","width":640},{"text":"great. okay. so here's what we're going to do today. we are going to talk about memory allocation","width":448},{"text":"we're going to look at some code that some ta's wrote last semester","width":256},{"text":"and then we're going to jump into a new topic called threads","width":192},{"text":"and this is where we can actually get more than one CPU to work on our processes","width":512},{"text":"let's start with this. let's have a look at this code that the TA's wrote","width":448},{"text":"they actually wrote a version of malloc() and free()","width":320},{"text":"i want to show you that it is possible to write some code that works","width":256},{"text":"first we'll define a struct and we use typedef because we're lazy and we don't want to have to keep writing struct","width":896},{"text":"and so in the future we can just say metadata_entry_t","width":512},{"text":"typedef is just saying here's an alias","width":320},{"text":"this is what we're going to have inside our little struct. we have a ptr that we'll be using for the user memory","width":384},{"text":"we want to know how many bytes to use","width":128},{"text":"we want to know are we talking about memory that's currently in use by the program or is it free. is it available for a future malloc()","width":512},{"text":"and finally here is what we're using a linked list so we can walk through these things","width":512},{"text":"and so this is going to be our metadata, our information about what memory our malloc() has actually created or freed","width":384},{"text":"and so this will be the beginning of our linkedlist","width":256},{"text":"and now let's have a look at the malloc() implementation","width":256},{"text":"we want to know how many bytes do they want. so we're going to look through our linkedlist and look for the appropriate block that we can reuse","width":640},{"text":"let's walk through our list and we can obviously we only care about entries which are free. we don't want to use a block that is currently in use","width":832},{"text":"but i've missed out some code here so it's going to be your job to figure out what code is here","width":576},{"text":"also what placement strategy is this using. remember we talked about different strategies in the last lecture","width":512},{"text":"which one is this using and how do we change the code to use a different strategy","width":384},{"text":"and then there's more code down here. so what's this second half of the code do","width":448},{"text":"so that's going to be our challenge for the next 5 minutes","width":192},{"text":"change the strategy that this is using and what does the rest of the code do","width":448},{"text":"and you may also want to have a look at the free() and i'll walk around and answer any quesitons  on this or next week's assignment","width":896},{"text":"silence","width":19200}]