[{"text":"there we go","width":64},{"text":"we've also go the information we need inside here to actually create the socket","width":320},{"text":"so if you expect you'll get address info to return maybe an IP6 ","width":384},{"text":"maybe multiple kinds of different sockets","width":192},{"text":"then you'd be pulling that information out of that linkedlist each time","width":192},{"text":"so we've called socket and then we would try","width":320},{"text":"to connect to that remote host","width":192},{"text":"and let's say we've successfully got a connection","width":448},{"text":"hey great we're now talking to that machine","width":192},{"text":"right so this connect call is heavy it's big it's slow ","width":320},{"text":"it actually goes out there and connects","width":192},{"text":"it doesn't just like \"oh, connect please\" it's \"no make contact\"","width":256},{"text":"send some packets to and from that machine","width":192},{"text":"so it connect might take a second or more to complete","width":320},{"text":"might take a minute","width":64},{"text":"if you're remote server you're trying to connect to is a long way away","width":384},{"text":"so this is potentially very very slow","width":128},{"text":"how quickly you can talk to the remote machine","width":448},{"text":"if you're trying to talk to yourself it should be pretty fast","width":256},{"text":"so you could talk to yourself very quickly and discover if you can connect to a particular port","width":448},{"text":"there's one thing we didn't talk about yeyt","width":320},{"text":"and that is ","width":128},{"text":"this magic call called bind","width":256},{"text":"so usually we don't like to be bound up","width":512},{"text":"but today we're going to be calling bind on our socket","width":192},{"text":"we're going to take our socket and we're going to bind it to a particular local port","width":512},{"text":"let's say use this local port","width":320},{"text":"now most of the time when you want to connect to a remote server","width":128},{"text":"you don't care where your packets leave from","width":192},{"text":"you don't care which port is used locally","width":128},{"text":"just let the operating system let the kernel choose the outgoing port","width":320},{"text":"but when we want to make a server typically we do care","width":256},{"text":"if I'm going to make a webserver I want it to be on port 80","width":256},{"text":"so we can use bind if we want to set the ","width":640},{"text":"local port","width":192},{"text":"you could also use it if you've got say two network cards","width":640},{"text":"and you want to specifically use a particular network card","width":256},{"text":"but if controls the local side of the connection","width":640},{"text":"","width":960},{"text":"which is exactly what we're going to need when we make a server","width":448},{"text":"","width":384},{"text":"so if i tried to connect to your cellphone right now on a particular port","width":448},{"text":"i'd probably discover that it's not listening on that particular port that I was connect to","width":320},{"text":"connect would return back and say haha I'm sorry I've failed","width":256},{"text":"I've managed to send a packet and it said nothing ","width":128},{"text":"i didn't get anything back","width":128},{"text":"for your cellphone","width":64},{"text":"so connect fails","width":128},{"text":"what we ought to do in the server is the opposite","width":320},{"text":"we want to sit here and wait for people to come to us","width":320},{"text":"wait for packets to come to us","width":128},{"text":"wait for packets to come to our port","width":128},{"text":"what we want then is a passive connection","width":192},{"text":"not something that goes out and tries to connect","width":192},{"text":"but just sits there and says huh no let us the packets come to us","width":192},{"text":"we can do this","width":192},{"text":"and it's very very easy","width":320},{"text":"alright so a passive socket level one understanding is just hey it waits for connections to connect to it","width":576},{"text":"it's sitting on the key side of the particular port saying okay I'm on port 80 send your packets to me I'm ready","width":576},{"text":"and when they do I'm going to do something special","width":64},{"text":"right so what's a passive socket ","width":128},{"text":"first of all it's a socket that is listening ","width":192},{"text":"it's also known sometimes as a server socket","width":256},{"text":"because we use it for serving we just it for waiting for connections","width":448},{"text":"so it's passive in the sense that it's waiting for connections","width":384},{"text":"and it has a cute little trick","width":640},{"text":"","width":384},{"text":"lets say I'm the client, you're the server","width":192},{"text":"can you catch?","width":64},{"text":"let's say you're the server","width":320},{"text":"right there you go","width":64},{"text":"that ladies and gentlemen is a dropped packet","width":512},{"text":"alright here","width":256},{"text":"that server wasn't listening","width":128},{"text":"okay fantastic right","width":640},{"text":"so I've sent my-k-I've just connected to the server","width":320},{"text":"on the passive socket","width":128},{"text":"now here's what the passive socket does","width":128},{"text":"when it returns the connection, when it does the handshake back to me","width":384},{"text":"thank you","width":128},{"text":"it sends an additional piece of information which is","width":320},{"text":"don't talk to me, don't talk to that port anymore","width":192},{"text":"I've got a new port set up just there","width":320},{"text":"that is the special connection that is just between you and me","width":256},{"text":"so we'll see that in a moment on the C side as well ","width":384},{"text":"on the seaside I like that","width":64},{"text":"so we'll see that in terms an additional file descriptor","width":320},{"text":"that's part of that handshaking","width":128},{"text":"once we make the connection on the server side,","width":128},{"text":"no no we have a completely different just for that one connection","width":320},{"text":"why do we do that?","width":64},{"text":"well guess what we're making a server","width":128},{"text":"we're trying to take over the world or whatever","width":128},{"text":"and other people might be connecting to por t80","width":192},{"text":"as soon as they do that they're going to be talking to you again","width":256},{"text":"so in order to keep all these connections separated","width":192},{"text":"we push them onto different ports","width":128},{"text":"alright so the time you actually spend talking to this particular port is minimal","width":448},{"text":"okay so why do we create one","width":192},{"text":"so we can have a server","width":384},{"text":"I want to make a server","width":256},{"text":"right so how do i do all this","width":320},{"text":"have I put this in yet no","width":128},{"text":"so here's what we should do ","width":128},{"text":"in our hints struct","width":256},{"text":"we're going to specify one more thing","width":256},{"text":"let's go back to here","width":192},{"text":"something we haven't used yet is this flags","width":192},{"text":"and there's a flag to say","width":768},{"text":"hey make a passive socket for me please","width":384},{"text":"trying to think if it's yeah must be uppercase right","width":384},{"text":"so before making your get address infor call","width":576},{"text":"by the way i would like a passive socket","width":256}]