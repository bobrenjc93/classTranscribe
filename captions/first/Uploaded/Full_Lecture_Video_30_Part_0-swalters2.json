[{"text":"alright, let's try that","width":8832},{"text":"alright, good morning ladies and gentlemen","width":256},{"text":"minor technical difficulties this morning","width":128},{"text":"my laptop decided to freeze","width":192},{"text":"one second out of four","width":128},{"text":"never seen that before, guess it must be because we're trying to have a demo today","width":256},{"text":"right, so here's what we're going to do today","width":128},{"text":"I'm going to introduce you to one of the coolest things you can do in system programming","width":192},{"text":"and that is memory-mapped files","width":192},{"text":"so cast your mind back to when we said that","width":192},{"text":"we had virtual memory and our addresses are mapped to different parts of physical memory","width":448},{"text":"and this happens magically without our programs having to do anything","width":256},{"text":"well now we need to actually take control of that mechanism","width":256},{"text":"and we can ask for a file on disk","width":256},{"text":"to be mapped directly into our memory","width":192},{"text":"that's pretty cool if you think about it","width":64},{"text":"if you actually had, say, some structured data","width":128},{"text":"on memory, you could immediately jump to a certain area of the file","width":192},{"text":"and read it, without having to write","width":192},{"text":"read calls, fread calls, fc calls, that kind of stuff","width":192},{"text":"you can just say: \"Hey! I know where is is in memory","width":128},{"text":"I can just read that memory\"","width":64},{"text":"and the operating system will say \"Hah!","width":192},{"text":"I don't have those particular bytes","width":128},{"text":"actually on RAM yet, let me do it for you! Hold on a second","width":256},{"text":"we'll pause your process, and we'll pull in those bytes","width":128},{"text":"and we'll release you again","width":128},{"text":"so you can immediately see the contents of the file.\"","width":128},{"text":"The other cool thing we can do with this","width":128},{"text":"is if we mapped","width":192},{"text":"some memory using mmap","width":128},{"text":"and we then fork()","width":128},{"text":"we can now communicate between two processes","width":256},{"text":"directly, using some memory addresses","width":128},{"text":"so we'll play with that today","width":128},{"text":"if I can get my laptop to restart","width":256},{"text":"and play","width":64},{"text":"play correctly, okay","width":128},{"text":"alright so whilst that is ","width":704},{"text":"[gibberish]","width":192},{"text":"let me tell you about a couple of useful commands here","width":192},{"text":"one is dd","width":128},{"text":"so if you ever want to just copy some bytes","width":192},{"text":"from one place to another","width":128},{"text":"and you want to take control of exactly how many bytes","width":192},{"text":"to copy rather than, say, copying the whole file,","width":128},{"text":"dd is useful","width":128},{"text":"it will open","width":128},{"text":"one path","width":64},{"text":"and open a right path","width":64},{"text":"and you can say how many bytes to copy","width":128},{"text":"so, for example, the following copies some bytes","width":192},{"text":"from /dev/urandom to ~ (tilde)","width":192},{"text":"okay you and I know that ~ (tilde) means...","width":128},{"text":"[gibberish]","width":128},{"text":"yes, that","width":64},{"text":"it means my home directory","width":128},{"text":"so I'm going to make a file called \"secret.txt\"","width":128},{"text":"hopefully the NSA doesn't try to decrypt this file","width":192},{"text":"because, in fact, it's just random bytes","width":64},{"text":"(evil laughter)","width":128},{"text":"and how big should it be?","width":128},{"text":"well, I want each block size to be 1k and count of 1024","width":256},{"text":"in other words","width":64},{"text":"my total file size will be a megabyte","width":256},{"text":"I could, if I wanted to overwrite my secret file","width":192},{"text":"start reading bytes from /dev/zero","width":192},{"text":"[gibberish]","width":128},{"text":"and again, I'm going to make a file that is the same size","width":320},{"text":"equivalently, I could have set my block size to be","width":512},{"text":"1 byte, and","width":256},{"text":"put in a million here or whatever ","width":128},{"text":"[gibberish]","width":64},{"text":"so we'll pretend I know that calculation","width":192},{"text":"there we go","width":128},{"text":"[gibberish]","width":64},{"text":"but it wouldn't have been quite so efficient","width":192},{"text":"we would have made very small calls so it would have been a little bit slower","width":256},{"text":"I can also use","width":192},{"text":"the following file as a place to send my output","width":192},{"text":"/dev/null","width":128},{"text":"here's some wonderful things about storing things inside /dev/null :","width":256},{"text":"you can store as much as you want inside /dev/null","width":320},{"text":"but it ain't coming back","width":256},{"text":"so this is perfect place to store your","width":384},{"text":"your love letters from past girlfriends, dogs, cats, goldfish, whatever","width":320},{"text":"because no one will ever find them","width":256},{"text":"that you've got this perfect storage","width":320},{"text":"of course, it's infinitely compressable as well","width":128},{"text":"you can send as many bytes as you want to /dev/null, and it won't use any disk space","width":192},{"text":"why? it's not a real place in your disk","width":256},{"text":"it's not part of your disk's filesystem","width":256},{"text":"there's something special about this /dev","width":384},{"text":"you find it actually listed in your disk","width":256},{"text":"anywhere, oh good my machine has booted up, now we can actually play","width":256},{"text":"instead, it's a virtual filesystem","width":576},{"text":"hooray! okay good","width":832},{"text":"okay, right, so","width":576},{"text":"let's go into, what have I got","width":192},{"text":"so I want to find anything that talks about","width":256},{"text":"CS and ends in a '1'","width":64},{"text":"so that star is an example of globbing","width":192},{"text":"the filesystem doesn't do that; the shell does","width":256},{"text":"the shell says \"Okay, I'll try to find all matching things that match that pattern","width":320},{"text":"you could have done that for parshell for example","width":192},{"text":"anyway, so let's go into our demo two today","width":64}]