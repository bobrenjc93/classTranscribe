[{"text":"so let's change our permissions","width":384},{"text":"so change mod, and I will change it to now","width":384},{"text":"what's a reasonable permission for directories?","width":128},{"text":"well maybe we want to be able to read write it and execute it, of course","width":384},{"text":"and we want other people to be able to read and execute it, so if I do that","width":128},{"text":"then now I can make my file","width":448},{"text":"and now if I do a d so I can actually see the subdirectory itself","width":704},{"text":"you'll see that yes, we're a directory","width":128},{"text":"and yes, I've got the read write execute for myself and execute and read for everybody else","width":320},{"text":"that was a very quick introduction to umasks and touching things","width":640},{"text":"and file globbing. Any quick questions about this?","width":192},{"text":"Alright, conceptually not hard, as I said the only surprise","width":320},{"text":"is that for directories, two bits is the execute bit","width":768},{"text":"that controls whether you can see inside","width":384},{"text":"the directory","width":256},{"text":"so no the directory's name, but whether you can actually go in and see the contents of a directory","width":320},{"text":"what files and other directories did I put inside of it","width":192},{"text":"and for the umask, remember it's a mask","width":256},{"text":"you're subtracting things that otherwise would have been set","width":256},{"text":"and it's only for new files and directories","width":832},{"text":"so nothing conceptually very hard","width":576},{"text":"now, here's the fun part, let's","width":320},{"text":"let's have a look at some of these other filesystems","width":192},{"text":"I've already mentioned /dev as ","width":192},{"text":"this completely different filesystem that's not actually a part of my disk","width":256},{"text":"and so that's the big idea, that I've got one","width":256},{"text":"set of paths in","width":192},{"text":"POSIX that I start with slash","width":256},{"text":"and go from there, everything's underneath this single slash","width":192},{"text":"all of my other things that I want to add","width":192},{"text":"all of my USB keys I put in","width":64},{"text":"all of my virtual directories and","width":256},{"text":"virtual filesystems are going to be underneath this root","width":448},{"text":"Windows used to have a different idea, it would say","width":128},{"text":"I'll put one disk inside of C:\\, I'll put one disk inside of D:\\","width":320},{"text":"and we better not have more than 26 disks or we'll run out of letters","width":256},{"text":"that was the old kind of DOS way of doing things, we've gone past that now","width":320},{"text":"but back in POSIX","width":128},{"text":"we all start here, and we can add the virtual filesystems","width":384},{"text":"underneath specific directories of our filesystem","width":192},{"text":"so we've got /dev, there's a couple of others","width":320},{"text":"here they are:","width":128},{"text":"/proc and /sys","width":256},{"text":"right, so how can we find out about these?","width":256},{"text":"glad you asked! Let's have a look at a little demo here","width":256},{"text":"I want you to cast your mind back to","width":768},{"text":"before you were born and","width":192},{"text":"filesystems were heavy","width":256},{"text":"not something you would carry around in your pocket","width":256},{"text":"but literally something you had to lift with both hands","width":256},{"text":"because it was a huge tape, a huge disk","width":192},{"text":"and you'd lift it and you'd mount it onto a spindle","width":192},{"text":"and spin it up","width":128},{"text":"the command for thinking about filesystems is mount","width":448},{"text":"tell me what's mounted, tell me what's been put into my machine","width":256},{"text":"and by default we get a big list","width":192},{"text":"and we discover, oh look, I've got a whole load of different filesystems","width":384},{"text":"mounted on different points inside of my filesystem","width":128},{"text":"so I've got one called /srv","width":256},{"text":"some of these are going out onto the network, etc","width":192},{"text":"I've got something called tmp","width":192},{"text":"oh, here are the one's I've just been talking about, /proc and /sys","width":192},{"text":"and there'd be /dev somewhere aswell","width":192},{"text":"so there are different types","width":192},{"text":"a lot of the ones we're looking at here, as you can see, are ext4","width":320},{"text":"which is the modern-day equivalent of ext2 which we've already studied","width":256},{"text":"and we could add more to this","width":256},{"text":"so if we plug in a USB key, for example","width":128},{"text":"you would see it appear here","width":128},{"text":"if I mounted a DVD or CD it would appear here","width":192},{"text":"our filesystems don't need to be on external devices","width":256},{"text":"they can even be inside of a file","width":192},{"text":"so here's a file I downloaded earlier","width":384},{"text":"it's a .iso image","width":128},{"text":"meaning that I could copy these bytes using, which command?","width":320},{"text":"dd, yes, onto a say USB key","width":384},{"text":"or onto a DVD-ROM, but","width":192},{"text":"I actually want to have a look to see what's inside this file","width":384},{"text":"[gibberish]","width":128},{"text":"but allegedly this is actually a filesystem inside this file","width":384},{"text":"so how can we do that?","width":128},{"text":"first of all we need to make a directory","width":192},{"text":"where we're going to mount this filesystem","width":192},{"text":"so let me call it stuff","width":256},{"text":"and you know right now if I look inside stuff there's nothing there!","width":448},{"text":"oops, cannot open directory? why is that?","width":192},{"text":"probably because my umask, oh alright, okay, thank you umask","width":320},{"text":"fix my umask, okay","width":192},{"text":"make directory stuff2","width":256},{"text":"so there's nothing inside of that directory","width":320},{"text":"what I'm going to do now is that that iso file","width":256},{"text":"and say to the kernal, \"Treat this file that I just downloaded using wget","width":320},{"text":"and pretend that it's a real disk somewhere and start being able to read from it\"","width":512},{"text":"now you know that when you write disk commands","width":128},{"text":"you actually read in chunks, not at a byte at a time","width":192},{"text":"we're not doing fseek() and fread(), we want to read 4K blocks","width":192},{"text":"so we need one additional magic command with mount","width":192},{"text":"to say, okay, loop it back and wrap it","width":256},{"text":"wrap this this file and turn it and treat it as if it's a full","width":320},{"text":"as if it is a block-based device","width":128},{"text":"so let's do this, let's switch into root mode here","width":320},{"text":"okay, where's my little file?","width":384},{"text":"let me play with globbing, so there we go","width":128},{"text":"match any files that start with that, and I know it's just one of them today","width":256},{"text":"okay, and I want to mount it on a particular directory","width":192},{"text":"so, we had stuff2","width":192},{"text":"oh, it didn't work because I didn't add the loop option","width":256},{"text":"yes the .iso file I want to treat as a block-based device","width":320},{"text":"so I need that one last option. Great, it works, and now","width":192},{"text":"we can, if I look at my mount listings, see that we've got that file","width":320},{"text":"mounted inside of my directory as this iso9660","width":320},{"text":"which is a standard for CD-based filesystems","width":192},{"text":"and it's using particular loop-based device to turn it into a block-based device","width":256},{"text":"great, let's go and have a look","width":64}]