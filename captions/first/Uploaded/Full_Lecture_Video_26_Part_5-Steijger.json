[{"text":"So what are these UDP packets look like?","width":448},{"text":"So here's the specification of UDP","width":192},{"text":"It's this little diagram here","width":320},{"text":"And there's really not much to it","width":384},{"text":"It's the UDP format","width":128},{"text":"I got a source port, destination port","width":192},{"text":"So each of those is 16 bits","width":256},{"text":"I've got the length here, 16 bits","width":192},{"text":"I've got a checksum which is required for IPv4","width":384},{"text":"And the data that someone wants to send me","width":64},{"text":"So that was the original spec","width":192},{"text":"So it looks like we could have packet sizes up to 2^16","width":512},{"text":"Because that's the number of bits that our length is","width":320},{"text":"In practice that may not be true","width":192},{"text":"The spec actually says the minimum supported is 500 bytes","width":448},{"text":"And in practice most routers will happily send packets up to 1500bytes","width":768},{"text":"Which by the time you add the overhead of the UDP and IP fragment ","width":192},{"text":"It means that UDP packets are limited to about 1472 bytes","width":384},{"text":"So try sending a packet greater than that on a classic network","width":384},{"text":"Good luck","width":192},{"text":"How do you know it didn't work?","width":192},{"text":"This is the sound of silence","width":128},{"text":"You get NOTHING","width":64},{"text":"You send stuff out","width":64},{"text":"It goes nowhere","width":128},{"text":"There's a router in the middle that says","width":256},{"text":"I SEE YOUR PACKET","width":128},{"text":"I SPIT ON IT","width":64},{"text":"I EAT YOUR PACKET FOR LUNCH","width":64},{"text":"Right","width":64},{"text":"So","width":64},{"text":"There's two little problems right so","width":192},{"text":"It's great for sending small amounts of information","width":384},{"text":"An amusing anecdote here is IPv6 has since designed jumbo packets","width":576},{"text":"Which can be up to 4GB in size","width":128},{"text":"I mention this because I find this amusing because right now ","width":512},{"text":"Most of the infrastructure spits on anything bigger than 1472 bytes","width":256},{"text":"And we've got spec that allows up to 4G","width":192},{"text":"Good luck getting that packet to go anywhere","width":192},{"text":"Maybe by the time you graduate we'll see jumbo packets floating around on the internet","width":320},{"text":"But the spec is there","width":64},{"text":"It's probably going to take a generation of electrical failures before we upgrade enough of the infrastructure before jumbo packets truly work","width":576},{"text":"You might be able to get it to work on your local subnet","width":192},{"text":"On your local router","width":192},{"text":"If you buy some very modern hardware","width":320},{"text":"But these days currently ","width":64},{"text":"UDP in practice","width":192},{"text":"Yes that's about the maximum size you send a packet","width":256},{"text":"So when is UDP actually used?","width":256},{"text":"You will see UDP packets for DNS","width":192},{"text":"The main name service","width":320},{"text":"So when you type in something like HEY","width":192},{"text":"I want to go to the host which say its bbc.com","width":320},{"text":"Someone somewhere needs to know how to translate this address to an IPv4 or IPv6 address","width":640},{"text":"And the person","width":256},{"text":"The service","width":64},{"text":"Who knows how to do this is DNS","width":128},{"text":"Which cached this information","width":64},{"text":"So there's a whole hierarchical structure of servers that can convert hostnames and addresses to their relevant IP numbers","width":640},{"text":"To do this your machine sends out UDP packets","width":512},{"text":"And it may send out to 2 or 3 different DNS servers","width":384},{"text":"They might say Hey Im in a rush here","width":64},{"text":"And quick I need to know","width":128},{"text":"Who has the answer?","width":128},{"text":"So that's why we use DNS","width":64},{"text":"A single packet, if it gets lost, it doesn't matter","width":256},{"text":"I'm going to ask someone else as well","width":64},{"text":"If it times out I'll just send it again","width":192},{"text":"It's a simple kind of QUICK I NEED THIS","width":256},{"text":"and hopefully I'll get the response back as fast as possible","width":128},{"text":"Much faster than opening up a TCP connection","width":128},{"text":"So DNS traffic uses UDP","width":256},{"text":"Let's compare this with TCP","width":704},{"text":"So the TCP packets are much more uh complicated","width":896},{"text":"Here they are","width":64},{"text":"There's some similarities","width":256},{"text":"You'll notice that we've got a port number","width":256},{"text":"From the source and the destination","width":320},{"text":"Why do you think we need the source port?","width":192},{"text":"I'm sending you a packet to your server","width":576},{"text":"Why should I send you my source port?","width":256},{"text":"So you can responde","width":128},{"text":"So look there's multiple packets going out of different ports on my server all of the time","width":576},{"text":"When the other socket at the other end wants to send back some information it needs to know which port to send it to","width":448},{"text":"So  the source port is important because we'll need that for the destination","width":448},{"text":"We've also got a sequence number.","width":192},{"text":"Remember","width":64},{"text":"What does TCP try to do ?","width":64},{"text":"It tries to hide the fact that we're sending packets across","width":320},{"text":"We've kind of turned this into a stream","width":256},{"text":"But packets might get lost","width":64},{"text":"It might get duplicated","width":64},{"text":"So our trick is to keep track of the total number of bytes that we've successively sent in each direction","width":640},{"text":"So we'll mark each packet with where we are in the stream","width":384},{"text":"So we have a sequence number","width":192},{"text":"It represents the actual number of bytes that have been transferred in this direction so far","width":320},{"text":"So this means if we lose some packets","width":128},{"text":"The other end can say","width":64},{"text":"HEY","width":64},{"text":"I've lost some packets","width":192},{"text":"I've lost you","width":128},{"text":"Can you resend starting from here?","width":320},{"text":"And that's part of the acknowledgement number","width":192},{"text":"The other end of our connection can say I hear you","width":384},{"text":"I've got your message so far up to this point in the stream","width":320},{"text":"Right","width":192}]