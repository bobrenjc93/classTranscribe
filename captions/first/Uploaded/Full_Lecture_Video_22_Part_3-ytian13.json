[{"text":"so we'll get that and HTTP/1.0","width":448},{"text":"okay, great!","width":128},{"text":"and I get a big chunk of text, including stuff that says","width":256},{"text":"\"Hey, maybe you want to use Javascript as well\"","width":128},{"text":"alright, so I'm getting a little bit of text, of a script on that page","width":384},{"text":"and finally","width":128},{"text":"we see these tags down here, </body>, </html>","width":320},{"text":"is that part of the HTTP protocol? No!","width":192},{"text":"what is it?","width":64},{"text":"it's HTML!","width":64},{"text":"HTML is independent of our network protocol","width":320},{"text":"HTML is just a way to describe a webpage","width":320},{"text":"and of course you can save that on a file","width":128},{"text":"you can save it on a USB stick","width":256},{"text":"HTML is completely independent of HTTP, so HTTP is about talking to web servers","width":320},{"text":"HTML is about how to mark up web pages","width":256},{"text":"they are two different protocols","width":192},{"text":"so we've shown that I can use this little tele-command to talk to webservers and this number 80 here is a port number","width":704},{"text":"if you want to run things on port 80, you can't","width":320},{"text":"unless, you run it as root","width":192},{"text":"so, the lower port numbers","width":192},{"text":"port numbers 0, 1, up to 1023, require you to be an administrator on the machine","width":448},{"text":"which is great because you will have a virtual machine now, that you can root into","width":320},{"text":"you can do sudo, or you can log in as root, and you can then set up a web server on that machine on port 80 ","width":448},{"text":"let's see what we're going to do today","width":128},{"text":"we're going to write some code that basically does this from C","width":256},{"text":"so we're going to connect to another machine","width":192},{"text":"so this is kind of what was enough for you to write half of Yik-Yak, if you'd like","width":256},{"text":"at least the client end","width":128},{"text":"here's some code I wrote earlier","width":320},{"text":"perfect timing","width":192},{"text":"and this is the beginnings then, of what network coding looks like","width":640},{"text":"now","width":192},{"text":"what we're actually going to create is something called a socket","width":256},{"text":"so a socket is","width":128},{"text":"a system object ","width":128},{"text":"not a C++ object, of course","width":128},{"text":"but just an object that represents the connection endpoint","width":320},{"text":"that we can send bytes into and get bytes back from","width":256},{"text":"so it's like a, think of it like a socket you can plug into","width":320},{"text":"it's going to be a way for us to communicate with remote servers and also weigh a socket's","width":512},{"text":"you can set options on a socket","width":64},{"text":"we're not going to do anything fancy today","width":192},{"text":"but how to identify sockets?","width":256},{"text":"easy","width":64},{"text":"just with","width":64},{"text":"a file descriptor","width":320},{"text":"so this will just be a small number","width":192},{"text":"and once we've done all this magic, we can just call read and write on this socket descriptor, and use it just like an open file","width":512},{"text":"so let's what we've got here","width":576},{"text":"i'm going discuss this amazing beast","width":320},{"text":"this didn't used to be inside CS 241","width":128},{"text":"for a networking class, this is relatively a new addition: get address info, and it makes writing network code much, much easier","width":448},{"text":"it does so much for us, it sets a whole lot of C structures for us","width":256},{"text":"and it can be used in a variety of ways, we're going to look at one way today, which is to go from","width":384},{"text":"a host name that we understand","width":128},{"text":"a fully qualified name here, like \"www.illinois.edu\"","width":192},{"text":"and turn that into an IP address","width":256},{"text":"a binary number","width":64},{"text":"so to use it","width":512},{"text":"we actually have to create a little struct","width":256},{"text":"notice the struct name is the same as the function","width":320},{"text":"getaddrinfo","width":64},{"text":"but in fact, there's going to be two structs","width":128},{"text":"we set on up as a kind of \"hints\" structure, to say this is the kind of stuff that I'd like to know about","width":448},{"text":"and we get back a pointer to a different struct","width":192},{"text":"of the same type","width":128},{"text":"so that's why I have","width":128},{"text":"one called \"hints\" and one called \"Okay, yeah. I'm also going to need a pointer to one\"","width":256},{"text":"so I'm not going to set up result, that was going to be set up for me","width":192},{"text":"and if you look down here, you'll see that we pass in not the pointer, but a pointer to that pointer","width":384},{"text":"because this function is going to mess with that pointer","width":128},{"text":"it's going to set that pointer to the completed information","width":320},{"text":"right","width":192},{"text":"so, what do we care about today? ","width":128},{"text":"well, I would like to have the information for connecting with an IP","width":512},{"text":"connection for us, so I want to make a connection","width":192},{"text":"yeah, yeah, just like 95% of the rest of the internet traffic using using version 4","width":320},{"text":"and I want to use TCP","width":192},{"text":"and as we know, TCP is a stream, it's like a pipe","width":256},{"text":"and these constants are kind of hard to remember, don't panic in an exam","width":384},{"text":"I'll give you a crib sheet","width":64},{"text":"but also, just as a hint, notice that they always come in this variety where the AF corresponds to a hint for you about what things should this be connected with?","width":832},{"text":"so sock, for example, the kind of socket type is a prefix as to what this constant should be","width":576},{"text":"now these constants are just integers","width":192},{"text":"they're just there to make our code look more readable as opposed to hard-coding constants","width":320},{"text":"unfortunately, it can mean then that you can accidentally put the wrong constant into the wrong field, and the compiler won't complain","width":512},{"text":"your code simply won't work","width":128},{"text":"now, writing network code is hard","width":320},{"text":"because","width":128},{"text":"it's like going to McDonald's, where everybody inside working there hates you","width":384},{"text":"unless you specify everything exactly correctly","width":320},{"text":"nothing comes out the window at the ned","width":192},{"text":"like doing a drive-thru and trying to do it with an English accent","width":256},{"text":"I have a really hard time at McDonald's","width":128},{"text":"\"You want fries with that?\", and I'll say, no matter what I say, I'll never get fries","width":576},{"text":"so when new is desperately working trying to figure how to say ","width":256},{"text":"another fun thing with an English accent is the phone things, you know","width":384},{"text":"like say \"one\" to \"one\"","width":128},{"text":"I never get anywhere","width":128},{"text":"so this is the fun of networking code is that you've got to specify things exactly and you've got to be on your tip-toes to make sure you haven't accidentally put the wrong constant in the wrong field because no one will tell you've made a mistake","width":960},{"text":"right, that's the first gotcha","width":192},{"text":"is give the right constants for the right fields","width":192},{"text":"the next gotcha","width":832},{"text":"at least for this code, is","width":256},{"text":"for the unused fields, we better set them to 0","width":256},{"text":"and that's the purpose of this memset","width":128},{"text":"there's a whole load of things in this struct that I don't want to set","width":256},{"text":"and if I don't do this memset","width":192},{"text":"and this is just on the stack","width":256},{"text":"then as you know, the stack memories are retrieved","width":128},{"text":"so","width":128},{"text":"make sure that you've set unused fields to 0","width":320}]