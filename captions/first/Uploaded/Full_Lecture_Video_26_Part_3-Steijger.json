[{"text":"So what about this?","width":192},{"text":"We've heard about starvation before where a process never gets to complete it's uh, it never gets to make any significant progress.","width":768},{"text":"Which scheduler could lead to starvation and how?","width":320},{"text":"Maybe there's more than one correct answer.","width":192},{"text":"Don't tell me know; tell your neighbors and see if you agree.","width":192},{"text":"Okay, so uh, a student has let me know that my calculations are suspect so I probably am off by a quarter millisecond or so.","width":4032},{"text":"So I apologize for that.","width":192},{"text":"Silly  numerical error.","width":192},{"text":"Okay so which ones can suffer from starvation?","width":128},{"text":"The second fourth and fifth.","width":384},{"text":"Shortest job first, yeah, so if you're getting text messages continuously you might never get to your chemistry homework.","width":896},{"text":"So next time you don't fill out your chemistry homework, or CS 241 HW, keep sending yourself text messages.","width":320},{"text":"They're nice and short, you'll do them straight away.","width":320},{"text":"So shortest job first; we can set up a starvation by keep making short jobs and we'd never get to the long job.","width":384},{"text":"The other possibility is pre-emptive shortest job first.","width":448},{"text":"So again uhm I would never get to my long job if I keep submitting short jobs.","width":384},{"text":"And preemptive priority.","width":256},{"text":"Same idea","width":64},{"text":"If I keep having an urgent thing to do","width":128},{"text":"I might never get to schedule my low priority items","width":320},{"text":"Is there a problem? Yeah.","width":704},{"text":"We have to choose a tradeoff.","width":128},{"text":"We have to decide what we mean by fair.","width":64},{"text":"So which schedulers are appropriate for batch jobs?","width":576},{"text":"Of course the answer is It depends!","width":64},{"text":"By batch jobs we mean aren't interactive which are typically run for long periods of time without user interaction.","width":512},{"text":"They have all the data they want to process","width":128},{"text":"Maybe stuff out of files or network","width":128},{"text":"Do some analysis on that data","width":192},{"text":"So we might care about say earliest job finishing first or shortest job finishing first","width":320},{"text":"in which case we might choose a shortest job first scheduler","width":256},{"text":"We might care about seeing the results of all of our jobs","width":320},{"text":"And we are prepared to wait so we might choose round robin","width":320},{"text":"Uhm","width":192},{"text":"The other possibility is to, in a real system","width":576},{"text":"Suppose your job crashes or runs forever, has an infinite loop","width":576},{"text":"If there is no preemption","width":256},{"text":"if we don't forcibly remove that job from the CPU everything gets backed up","width":256},{"text":"So we have to careful if we're not going to preemptive running jobs","width":576},{"text":"Right","width":64},{"text":"So there isn't a simple answer for this batch jobs","width":192},{"text":"It depends on what your criteria are","width":192},{"text":"So what scheduler does Linux use?","width":128},{"text":"I mentioned it last lecture","width":128},{"text":"The completely fair scheduler.","width":320},{"text":"Which is a little bit of an oversell","width":320},{"text":"Alright so it's not completely fair","width":448},{"text":"But it is similar to round robin where we are prepared to interrupt a process","width":512},{"text":"Every 10 milliseconds or so","width":128},{"text":"But we're prepared to give an extended period of time to jobs which don't use all of their time quantum","width":640},{"text":"So for interactive programs, desktop programs, UI programs","width":320},{"text":"These tend to have very bursty needs of the CPU ","width":128},{"text":"Like OH QUICK the user touched something","width":256},{"text":"OH QUICK wenfjsdnfdnfsnfj disk","width":64},{"text":"And they won't use it for 10 milliseconds","width":192},{"text":"They will only require a tiny bit of CPU","width":192},{"text":"Processing before we end up say sending it an event to the system","width":384},{"text":"Update the screen","width":64},{"text":"And we're done","width":64},{"text":"And we wait for the next user event","width":192},{"text":"So the completely fair scheduler says we'll remember that these processes didn't require a lot of CPU in the past","width":448},{"text":"So we'll prepare to give it a little bit of extended CPU in the immediate future","width":256},{"text":"So we'll try to make the system as responsible as possible","width":192},{"text":"K here's a classic problem in scheduling","width":384},{"text":"It's known as the convoy effect","width":192},{"text":"And we see this with the first come first served","width":320},{"text":"Scheduler","width":128},{"text":"And you can imagine a real system where I've got jobs which are very strongly CPU bound","width":640},{"text":"And other jobs other processes which are IO bound","width":256},{"text":"And if you branch in the queue going this way by first come first serve","width":960},{"text":"I might have a big job which comes","width":192},{"text":"I illustrate by drawing it a large size","width":320},{"text":"It's going to take a lot of CPU time to run","width":256},{"text":"And behind it I've got loads of little jobs which","width":256},{"text":"They don't take much CPU but they take some IO to do","width":192},{"text":"And then the classic description of the convoy effect","width":256},{"text":"Is we imagine this process uses the CPU for a long time","width":320},{"text":"Then just a little bit of IO","width":64},{"text":"Then repeats","width":128},{"text":"And here's the problem.","width":640},{"text":"These are the processes that start after this CPU heavy process","width":384},{"text":"They can't use the disk","width":256},{"text":"Or the IO","width":64},{"text":"They only need a tiny amount of CPU","width":192},{"text":"It's like going to McDonalds to grab some little ketchup packets or something","width":320},{"text":"And someone there is taking all the space","width":192},{"text":"\"I just need a little ketchup packet\"","width":192},{"text":"\"I'M SORRY WAIT YOUR TURN\"","width":128},{"text":"And so we have poor use of uh IO","width":256},{"text":"CPU sjandnasnfjn uses the CPU 100% of the time","width":384},{"text":"Very efficient","width":64},{"text":"But these other jobs are stuck and uh","width":192},{"text":"So our disk utilization is pretty poor","width":320},{"text":"We could have had a better choice if we used something like round robin","width":256},{"text":"Where we let these little jobs jump in and let them use the CPU for little bits of time","width":384},{"text":"And then they can actually get on with their disk IO","width":128},{"text":"Right","width":128},{"text":"The questions about threads","width":128},{"text":"I mean uh scheduling","width":256}]