[{"text":"So, the things I'm talking about are fseek and ftell","width":100},{"text":" Let's have a look at that","width":100},{"text":"Okay, great","width":100},{"text":" So, ftell, tells us our current position","width":100},{"text":" So if you go to file descriptor and you say, \"Where am I in the file?\" That's useful in case you want to get back there later for example","width":100},{"text":" It's also useful if you get to the end of the file and you want to know how big the file is","width":100},{"text":" So a common way of finding out how big the file is is the following","width":100},{"text":" We'll fseek to the end","width":100},{"text":"","width":100},{"text":"Call ftell and then fseek to the beginning of the file","width":100},{"text":" To do what we're gonna do, say copy it","width":100},{"text":"","width":100},{"text":"In fact, past cs 241 exam had asked you to identify or write code that does this very thing","width":100},{"text":" I wanna know, for example, how big of buffer I should need in order to read in the entire file","width":100},{"text":" Great, no problem","width":100},{"text":" I'll just find out how big the entire file is, and then go back, so I can read in the entire data","width":100},{"text":" And it's a common [something], common mistake to forget this line","width":100},{"text":" If you move to the end of the file, they say, \"Okay now what do we [something],\" your operating system will say, \"Ha ha ha","width":100},{"text":" Sorry, I don't have that many bytes","width":100},{"text":"\" Alright, so don't forget to move back to the beginning if you intend to actually read the data in","width":100},{"text":" Now, fseek is actually pretty powerful","width":100},{"text":" You can use it in three different ways","width":100},{"text":" You could say \"Hey, I want to get to the end, I want to get to the beginning, or I want to get to the absolute position","width":100},{"text":"\"","width":100},{"text":"So if you'd actually [something] called \"Hey, ftell was my current position\"","width":100},{"text":" You could use that to say \"Now I want to return to at that point\"","width":100},{"text":"","width":100},{"text":"Okay, let's have a play with this","width":100},{"text":"","width":100},{"text":"Okay","width":100},{"text":" So, I want to open a file, how do I do that? Well let's do it in using C, so we have a File pointer here","width":100},{"text":" Remember all these basically wrap a low level file descriptor, so we can call things like fprintf and fscanf, but other than [something], they will be calling write and read","width":100},{"text":" So, we could say open a file","width":100},{"text":" Let's call it \"data","width":100},{"text":"csv\", and I want it to say open it for reading and writing","width":100},{"text":" So, let me print some data to it, so I'll have 1, 2, 3, 4","width":100},{"text":" And, let me fclose this","width":100},{"text":" So, that means creating a file, writing to a file descriptor, and closing it","width":100},{"text":" Okay, so we will run this","width":100},{"text":"","width":100},{"text":"And we made a file","width":100},{"text":" Now inside here, I got my data","width":100},{"text":"csv, and I could look at its contents","width":100},{"text":" There we go","width":100},{"text":" Oh look, there it is, 1, 2, 3, 4","width":100},{"text":" So, let's do this again, but this time , we will play out our tricks with it","width":100},{"text":" Let's have a look at fseek","width":100},{"text":" Here it is","width":100},{"text":" We pass in a point to the stream","width":100},{"text":" We can specify an offset that typically is gonna be 0, and then this whence constant, which is either gonna be \"Hey an absolute position, the very beginning, or the very end","width":100},{"text":"\" So we can just seek to the end today","width":100},{"text":" So we'll go fseek on f","width":100},{"text":" No offset needed today","width":100},{"text":" And we want to go to the end","width":100},{"text":" And please tell me then where am I in the file","width":100},{"text":" ","width":100},{"text":"If we look at the ftell, ftell gives us back a long","width":100},{"text":" Let's not print anything this time","width":100},{"text":"","width":100},{"text":"Okay, and we'll have a look at that position","width":100},{"text":"","width":100},{"text":"Alright, what do we get? Oh zero, L","width":100},{"text":"","width":100},{"text":"How did we get zero L? Because that's not a real type","width":100},{"text":"","width":100},{"text":"Right","width":100},{"text":" So we made a file with 1, 2, 3, 4","width":100},{"text":" But the position is zero","width":100},{"text":" Why?","width":100},{"text":"I'll give you a clue","width":100},{"text":" Let's look at our data file","width":100},{"text":"","width":100},{"text":"Whoops","width":100},{"text":" We just opened a new file for writing and we cleared its contents","width":100},{"text":"","width":100},{"text":"So the file is empty","width":100},{"text":" We truncated back to zero","width":100},{"text":"","width":100},{"text":"Alright, so let's have a look at this data that I made earlier","width":100},{"text":"","width":100},{"text":"This time we'll open hello","width":100},{"text":"c for reading","width":100},{"text":"","width":100},{"text":"Okay, I will see that this time we found that our program size","width":100},{"text":" Whoops, why can't you see that?","width":100},{"text":"Just jump to the left","width":100},{"text":" 71? Right, yeah","width":100},{"text":" We printed out 71","width":100},{"text":"","width":100},{"text":"Okay, so what do we do? We opened hello","width":100},{"text":"c for reading and we seek the end","width":100},{"text":" And we said \"Okay, what's the current position?\"","width":100},{"text":"So, with this, then I could now read in all those bytes from that file","width":100},{"text":" For example, I might at this point say, \"Now I know how big this file is, let me have a buffer of exactly of right size","width":100},{"text":"\"","width":100},{"text":"Alright, so malloc position and then I can call fread","width":100},{"text":" Okay, so fread, I would like to read all bytes as possible","width":100},{"text":"","width":100},{"text":"Please","width":100},{"text":" Well, how many bytes do I want? Well","width":100},{"text":"","width":100},{"text":" That many","width":100},{"text":" Okay","width":100},{"text":"","width":100},{"text":"So, does that manage to read in my file? ","width":100},{"text":"Let's see what we get","width":100},{"text":" Alright, so this time, let's print out the ","width":100},{"text":"","width":100},{"text":"","width":100},{"text":" okay that was our position","width":100},{"text":"","width":100},{"text":"Let's print out, call it, num bytes read","width":100},{"text":"","width":100},{"text":"Okay, forget size of this","width":100},{"text":"","width":100},{"text":" Probably it is size type or long, but we will use that for now","width":100}]
