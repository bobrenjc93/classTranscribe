[{"text":"what we'll do we'll make a very simple piece of virtual memory","width":512},{"text":"and we'll let the hardware people actually make it real right?","width":384},{"text":"we're going to do it just today, the kind of five minute version and we'll let someone else worry about the actual hardware details","width":576},{"text":"here's the game we're going to play","width":256},{"text":"memory, real memory of course is expensive","width":192},{"text":"we'd love to have more of it but we're always constrained by the cost of memory","width":320},{"text":"the only really really great thing about memory is that it doesn't take up too much power","width":320},{"text":"we would like to be able to have processes that can actually use more memory than we physically brought","width":704},{"text":"we would like to have more than one processes believing that they've got all the memory in the world and that's where virtual memory comes in","width":640},{"text":"we're going to say make the addresses that the processes use","width":192},{"text":"only indirectly correspond to the actual ram or actual physical memory that we have on the machine","width":640},{"text":"so we need to do some sort of lookup","width":128},{"text":"anytime your process actually does a read or write","width":192},{"text":"we actually at the end of the day need to connect that to some RAM","width":320},{"text":"we need to connect it to a physical address","width":192},{"text":"so here is my physical address","width":512},{"text":"and what I'm going to do is divide it up into chunks","width":384},{"text":"and these chunks are called pages","width":192},{"text":"and I'm going to work with pages which are about 4000 bytes, 4096 bytes","width":576},{"text":"so when are we going to use this memory? ah all the time of course right?","width":960},{"text":"so if you've got an instruction like a CPU instruction that says okay increment register A","width":576},{"text":"just reading the instruction has to be in memory somewhere","width":512},{"text":"if you've got an instruction that says load from address 47000","width":320},{"text":"not only do we need the opcodes to be in memory, we need 47000 to correspond to some memory","width":512},{"text":"so I'm using my virtual memory addresses all the time","width":256},{"text":"not just for the data but for the code as well","width":128},{"text":"anytime you write a line of C code, this virtual memory lookup is happening for every single one of those","width":320},{"text":"we need to be able to somehow translate our virtual memory address into a place in memory","width":704},{"text":"so here's the big trick","width":320},{"text":"take your virtual memory address, get a really sharp knife and cut it conceptually into two pieces","width":448},{"text":"preheat the oven to two hundred degrees... no forget that bit","width":128},{"text":"we've got the lowest twelve bits which we are just simply going to ignore for now","width":384},{"text":"because what we'll do with those is that we'll just simply use them as an offset","width":256},{"text":"in other words, once I've decided which piece of memory, which memory frame or physical frame","width":768},{"text":"which page I'm going to use here","width":256},{"text":"Of those 4096 bytes, I need to tell you which of those I'm going to use and that's where my 12 lowest bit comes into play because guess what 2^12 is 4096","width":576},{"text":"so I can use those lowest twelve bits as just an offset into any one of these particular things","width":576},{"text":"the remaining bits and because I'm working in a little 32 bit system, I now need to map to memory","width":576},{"text":"okay so first of all, how many of these 2^20, how many bit combinations is that? how big is 2^20","width":896},{"text":"okay well let's, i'll give you a clue, it's 2^10 times 2^10 how big is 2^10?","width":896},{"text":"2^10 is 1024","width":192},{"text":"so we're talking 1024 squared in other words a million","width":512},{"text":"a binary million","width":128},{"text":"a megabyte","width":64},{"text":"I've got a million entries, a million possible numbers up here","width":512},{"text":"we're gonna give these numbers a name","width":256},{"text":"we're going to call this the page number","width":256},{"text":"and we better give these pieces of memory a name","width":640},{"text":"we're gonna call them frame","width":512},{"text":"I need to convert one to the other","width":256},{"text":"right so page frame a miracle occurs we map it to a particular frame","width":512},{"text":"here's a really easy way to do it","width":384},{"text":"let's just have a table in memory","width":128},{"text":"of a million entriese","width":256},{"text":"right so we take our twenty bits","width":128},{"text":"somewhere in memory in a well defined location","width":384},{"text":"we need a table big enough for 2^20 entries","width":640},{"text":"and these just hold the frame number","width":448},{"text":"so if your looking say at this one","width":320},{"text":"then it turns out that you're going to use this particular frame of memory","width":448},{"text":"if you're looking at this piece of memory, it turns out that you need this one","width":320},{"text":"if you're looking at this piece of memory, it turns out that you need this one","width":256},{"text":"if you're looking at this piece of memory, haha, no it turns out that you can't look at that piece of memory","width":576},{"text":"if you try to look at that piece of memory, BOOM, we're gonna blow your process up","width":384},{"text":"do you remember things like seg faults?","width":320},{"text":"this is it!","width":64},{"text":"this is at that moment when we try to look at a particular page numebr","width":256},{"text":"and we say ah hah guess what, that's not actually mapped to any real memory","width":256},{"text":"ah ah ah, you can't do that!","width":192},{"text":"so we can now protect portions of our memory, we don't actually have to map all those addresses","width":448},{"text":"so when we say to our process hey pick a memory location, pick any memory location, do you feel lucky punk?","width":320},{"text":"alright if our programs are well written then we'll stick on the valid page numbers","width":448},{"text":"if their not then our operating system, our kernel will notice that it's trying to read an impossible entry inside here","width":576},{"text":"right okay so this is called a page table","width":384},{"text":"and we have one of these for each process","width":320},{"text":"alright let's see if you're awake ","width":256},{"text":"I know it's up silly question it's a friday","width":192},{"text":"let's figure out this, what would happen if we could actually write to our own page table?","width":576},{"text":"how machiavellian do you feel today?","width":384},{"text":"what could you do if you could change your own page table","width":256}]