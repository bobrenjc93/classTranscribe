[{"text":"but the way you build your code will stop that from happening","width":2125},{"text":"are you getting close?","width":1442},{"text":"okay I'm hearing the mumbling die down you guys ready","width":273},{"text":"anybody have a solution for me","width":679},{"text":"what's the sequence for enqueue","width":502},{"text":"okay I'm going to do the same way on s1","width":377},{"text":"why s1","width":269},{"text":"cause I have sixteen spaces and i want to wait if there are no spaces available","width":317},{"text":"so what do I initialize s1 to","width":163},{"text":"sixteen","width":136},{"text":"then what do i do","width":165},{"text":"lock","width":281},{"text":"what happens if i switch these two","width":163},{"text":"the order of those two","width":291},{"text":"okay I'm going have","width":67},{"text":"I'm breaking my synchronization I'll ask that again when we're done","width":170},{"text":"so then I do my enqueue","width":298},{"text":"how do I finish up?","width":162},{"text":"sorry?","width":139},{"text":"what should I do next?","width":334},{"text":"sorry?","width":134},{"text":"post ","width":301},{"text":"and then what? ","width":107},{"text":"unlock","width":373},{"text":"okay?","width":94},{"text":"what happens if uh is that the right order for those two?","width":510},{"text":"so he says he thinks the lock should be first","width":129},{"text":"why should the lock be first?","width":396},{"text":"you can let somebody else come in","width":99},{"text":"really you want your lock critical section ","width":329},{"text":"lock as tight as possible","width":238},{"text":"and then do other things outside that to manage your synchronization","width":269},{"text":"because you it's not going to be that bad for this small example","width":268},{"text":"but if you don't unlock until you do some other things","width":226},{"text":"you're locking somebody else out","width":103},{"text":"okay so if you release the lock before the post","width":284},{"text":"somebody else could come in and could be waiting right here","width":422},{"text":"remember because I got multiple readers can come past the wait","width":258},{"text":"up to sixteen if it's empty","width":218},{"text":"and then they all wait on the lock because only one is allowed in the critical section at the same time","width":431},{"text":"and then they're out","width":81},{"text":"once I step out of this","width":154},{"text":"the next one can acquire the lock and change something","width":213},{"text":"before the post happens","width":269},{"text":"so for the small pieces of code it's not really and issue","width":197},{"text":"but, for larger things you want to be careful","width":149},{"text":"okay so what's my dequeue","width":114},{"text":"so it's not a correctness issue it's a performance issue","width":206},{"text":"so what do i write for my dequeue","width":288},{"text":"wait on s2","width":53},{"text":"what's my additional value of s2","width":194},{"text":"zero because I have nothing in there","width":128},{"text":"and then I do what","width":116},{"text":"lock","width":180},{"text":"and then i do my dequeue","width":207},{"text":"then what do i do?","width":97},{"text":"unlock same reason","width":189},{"text":"and post which one?","width":219},{"text":"s1","width":149},{"text":"why does this work?","width":186},{"text":"I mean if you talk about this if you look at it right?","width":289},{"text":"the first thing is I'm coming in","width":247},{"text":"I'm saying are there any spaces","width":133},{"text":"if there's spaces I can put something in","width":212},{"text":"and now I'm telling the dequeue that I finished putting something in and now there's some items","width":513},{"text":"so same thing here","width":83},{"text":"I'm checking to see if there's any items","width":262},{"text":"and when I done I'm letting the enqueue know that there is more space if it was waiting for space","width":636},{"text":"so the key here is that the communication between the two","width":357},{"text":"is this crossover between s1 and s2","width":197},{"text":"our initial answer remember had just s1 on one side and s2 on the otherside","width":237},{"text":"there was no communication between the two to let them know that there was things changing","width":269},{"text":"and then our other answer just had them backwards","width":1457},{"text":"again if I unlock and then post","width":368},{"text":"alright first is somebody could be waiting on that lock","width":313},{"text":"the post just means somebody's waiting to know if there's more items","width":272},{"text":"the unlock says there's somebody waiting to get into the critical section","width":537},{"text":"but let's say there are five items in here right","width":303},{"text":"we'll say there's five items and I've called dequeue","width":336},{"text":"a bunch of times right so I've called dequeue the first time","width":205},{"text":"the first one goes through","width":113},{"text":"it says wait and it decrements it to four","width":413},{"text":"s2 is items right","width":143},{"text":"so it decrements it to 4 and it gets the lock","width":297},{"text":"and it could then post or unlock","width":228},{"text":"if the first thing it does is unlock","width":160},{"text":"the next one that was coming along here","width":169},{"text":"the next one came along and it blocked ","width":122},{"text":"it can't go anywhere","width":159},{"text":"it's not waiting for this post","width":161},{"text":"it's just waiting for the unlock","width":223},{"text":"so it's really just an ordering thing","width":130},{"text":"if there was more complexity to this system","width":200},{"text":"this mismatch could cause problems. it's just a performance issue it's not a correctness problem","width":320}]