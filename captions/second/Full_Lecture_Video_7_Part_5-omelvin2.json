[{"text":"Ok, so this time, yeah, look each address","width":417.18181824684143},{"text":"that was given to our program","width":133.18181824684143},{"text":"is valid. But we shouldn't try to dereference it. ","width":246.18181824684143},{"text":"We should actually just try to say, ","width":187.18181824684143},{"text":"look, I know you gave me a pointer to","width":104.18181824684143},{"text":"some memory, but I was kidding.","width":119.18181824684143},{"text":"i'm not actually interested in ","width":88.18181824684143},{"text":"using as a pointer to some memory","width":91.18181824684143},{"text":"I just want to cast it back.","width":75.18181824684143},{"text":"Change that current bit pattern","width":77.18181824684143},{"text":"you got as a pointer to a bit pattern that","width":145.18181824684143},{"text":"now represents an int.","width":81.18181824684143},{"text":"Do not pass go.","width":74.18181824684143},{"text":"Do not attempt to read memory at that location","width":173.18181824684143},{"text":"otherwise bad things will happen","width":91.18181824684143},{"text":"So, here's another way of actually getting the right results.","width":223.18181824684143},{"text":"So there we go. Now we have all of our numbers","width":237.18181824684143},{"text":"And something you might notice thats surprising","width":171.18181824684143},{"text":"is that it doesn't count up","width":187.18181824684143},{"text":"0 8 7 6 5 4 3 2 1 9","width":360.18181824684143},{"text":"Why?","width":547.1818182468414},{"text":"Does someone dare speak that hasn't spoken yet in CS241?","width":517.1818182468414},{"text":"Yes, in the back!","width":329.18181824684143},{"text":"Yes, thank you.","width":35.18181824684143},{"text":"There's no guarantee when that thread is going to stop.","width":182.18181824684143},{"text":"and in fact it might be paused half way","width":110.18181824684143},{"text":"the scheduler might say ","width":80.18181824684143},{"text":"actually, I know I was going to give you the ","width":116.18181824684143},{"text":"kitchen","width":52.18181824684143},{"text":"I was going to give you the CPU, but actually I've decided to give the CPU to another thread, so ","width":351.18181824684143},{"text":"we don't know when they're going to start, we don't know how much time they're going to get","width":233.18181824684143},{"text":"because the scheduler is part of the operating system","width":275.18181824684143},{"text":"is trying to make best use of all possible resources","width":191.18181824684143},{"text":"so we have something running but we don't necessarily know in what order those threads","width":193.18181824684143},{"text":"are going to run. yes?","width":472.18181824684143},{"text":"if I had 10 CPUs it could be that every thread is given a separate CPU","width":383.18181824684143},{"text":"of course it depends on what else is happening on your system, right? it could be that I've SSH'd into your box, it could be that your tablet is also using one of those threads update the screen at the same time. maybe check your email, etc.","width":748.1818182468414},{"text":"so it is possible to try to schedule threads on different CPUs, but in practice it doesn't always happen the way that you actually specify it. yes?","width":1068.1818182468414},{"text":"yes, you can set the priority of different threads. anyway, enough of this, let's have a look at page twoÂ ","width":1833.1818182468414},{"text":"there are various C library functions that you've probably played with already like strtok() when we wrote our shell, or \"hey I actually wanna know what the error number is as a string\"","width":893.1818182468414},{"text":"and if you read the man pages of these, you'll say \"oh they're not thread safe\". ok everythings broken. what does it mean that not everythings thread safe? it means here be demons. here's where you can write code that looks fine, pases code reviews, passes simple tests and breaks when you put it into the next hart monitor","width":1559.1818182468414},{"text":"so let's see an example of this","width":283.18181824684143},{"text":"here's some kind of typical code, let's find out if it's thread safe or not","width":562.1818182468414},{"text":"and perhaps you could figure out what might happen if this little two message function was called using multiple threads. so what might happen if two threads happened to call this function at the same time? why's it not safe? why could bad things happened?","width":6748.181818246841},{"text":"yes?","width":123.18181824684143},{"text":"[silence]","width":639.1818182468414}]