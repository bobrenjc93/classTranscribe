[{"text":"So if we do an aggregate analysis on this, we're going to start off with our array. ","width":462},{"text":"Of size one, one copy, put something in this array, easy, so that first thing is safe and fast.","width":494},{"text":"And I want to do another insert.","width":161},{"text":"That means I need to double the size of the array so I go up to size two.","width":384},{"text":"And then do my insert.","width":192},{"text":"Not looking different so far.","width":167},{"text":"Now I want to do another insert.","width":64},{"text":"It's full, so I need to double the array. ","width":128},{"text":"So now I go up to size four. ","width":921},{"text":"Then I get my insert for free. ","width":137},{"text":"I can insert four for free, because there's a spot.","width":282},{"text":"Insert again, well now I'm out of room, so I'm going to double the size of the current array. ","width":320},{"text":"So I'm going to go from four cells to eight cells now. ","width":911},{"text":"(Chase mumbles something...)","width":704},{"text":"And I can copy down my four elements, and then I can insert my five for free.","width":416},{"text":"Which means that six, seven and eight are all free.","width":256},{"text":"So, I'm getting, you can sort of see how this is working now, I'm getting proportionally more free inserts every time I do this resize. ","width":448},{"text":"And the number of free inserts I'm getting is directly proportional to the number of things that used to be in my array. ","width":320},{"text":"So this is why this is going to end up working out. ","width":192},{"text":"So six is free, seven is free, eight is free. ","width":192},{"text":"And if I have to do another insert, I would resize up to something of size sixteen, and I'm just not going to do.","width":668},{"text":"Alright, so this looks like it seems like it's going to work.","width":192},{"text":"But seems like it is going to work isn't enough. ","width":64},{"text":"So let's actually formally set this one up.","width":304},{"text":"So c of n is again the number of copies that we're going to do. ","width":305},{"text":"To do n push backs on this linear structure. ","width":482},{"text":"And again, an easy way of doing this, is to look at it in terms of the levels of arrays in this diagram.","width":704},{"text":"The array count, say.","width":208},{"text":"And then ask how many copies are done at each level just like last time.","width":512},{"text":"So how many copies are done for this level, h equals one?","width":320},{"text":"One copy. ","width":142},{"text":"This level?","width":106},{"text":"Two copies.","width":64},{"text":"This level?","width":86},{"text":"Four.","width":37},{"text":"This level?","width":100},{"text":"Eight.","width":64},{"text":"So what is this going to look like then?","width":265},{"text":"H minus 1. ","width":228},{"text":"So this looks like some kind of summation over h, from h either equals one or.. not h, let's do k.","width":664},{"text":"I'm just going to start off at zero and go up to h minus one, and then do two to the k.","width":798},{"text":"So let's start off at two to the zero which is one, then two, then four, then eight, then sixteen, etc.","width":384},{"text":"Okay, but we know this has a nice closed form from our back pocket from (rosens??), so this is two to the...","width":811},{"text":"Remember the closed form for that?","width":290},{"text":"Yeah, two to the h minus one. ","width":437},{"text":"That was from k equals zero up to, actually h, then it would be two to the h plus one minus one. ","width":464},{"text":"But here the upper bound of the sum is h minus one, so it's two to the h minus one, plus one, minus one.","width":320},{"text":"So it's just two to the h minus one. ","width":301},{"text":"Alright, we have something in terms of h again, which means we need to figure out what n is in terms of h.","width":384},{"text":"So, again, we're going to remember that this is n. ","width":283},{"text":"That's the number of things we've got in our array. ","width":384},{"text":"And, what is n here in terms of h at that level?","width":486},{"text":"Two to the h minus one. ","width":433},{"text":"I start h at 1, if I start h at zero then it's just h.","width":343},{"text":"In terms of the way i set up h here, it would be h minus one.","width":192},{"text":"So then what does that mean that n is?","width":64},{"text":"Well I can do log of n is going to be h minus one. ","width":360},{"text":"Which means that one plus log n is h. ","width":605},{"text":"I can plug that back in what I have for c of n up here. ","width":192},{"text":"I realize that's it's sort of getting crowded.","width":162},{"text":"So we had two to the h minus one, but we know that h is equal to one plus log n, so that's the same thing as saying two to the one plus log n minus one.","width":773},{"text":"Two times n minus one. ","width":576},{"text":"That is what?","width":154},{"text":"Big O of what?","width":97},{"text":"N!","width":320},{"text":"Finally we're going to get, why is that nice actually, sorry?","width":401},{"text":"Now it's constant amortized time, why?","width":224},{"text":"Divide by N, so we're going to have the amortized cost is c of n divided by n, which is big O of n divided by n, which is big O of one. ","width":1104},{"text":"Happy days, we've finally got constant amortized time. ","width":198},{"text":"This is not saying that every single insertion is constant time.","width":299},{"text":"This is saying something different, this is saying on average an insertion is constant time.","width":375},{"text":"Because there is always going to be that one insertion that takes a really long time, but it doesn't happen that often.","width":360},{"text":"And this is saying that, that happens just about..... The number of insertions that you get for free, is proportional to the size or to the cost of that resize that you get whenever it occurs.","width":896},{"text":"So in some sense these free, the free passes that you're getting when you're inserting into the empty cells of this array are sort of paying the cost for doing that resize later.","width":704},{"text":"You can follow that analogy further and do banker's method.","width":214},{"text":"So, I'm going to do banker's method now.","width":64},{"text":"I'm going to go down way down here. ","width":192}]