[{"text":"So what are these UDP packets look like?","width":444},{"text":"So here's the specification of UDP","width":240},{"text":"It's this little diagram here","width":513},{"text":"And there's really not much to it","width":155},{"text":"It's the UDP format","width":152},{"text":"I got a source port, destination port","width":141},{"text":"So each of those is 16 bits","width":141},{"text":"I've got the length here, also 16 bits","width":210},{"text":"a checksum which is optional for IPv4","width":149},{"text":"And the data that someone wants to send me","width":123},{"text":"So that was the original spec","width":352},{"text":"So it looks like we could have packet sizes up to 2^16","width":537},{"text":"Because that's the number of bits that our length is","width":273},{"text":"In practice that may not be true","width":237},{"text":"The spec actually says the minimum supported is 500 bytes","width":317},{"text":"And in practice most routers will happily send packets up to 1500bytes","width":695},{"text":"Which by the time you add the overhead of the UDP and IP fragment ","width":308},{"text":"It means that UDP packets are limited to about 1472 bytes","width":477},{"text":"So try sending a packet greater than that on a classic network","width":322},{"text":"Good luck","width":96},{"text":"How do you know it didn't work?","width":236},{"text":"This is the sound of silence","width":113},{"text":"You get NOTHING","width":122},{"text":"You send stuff out","width":76},{"text":"It goes nowhere","width":76},{"text":"There's a router in the middle that says","width":99},{"text":"I SEE YOUR PACKET","width":87},{"text":"I SPIT ON IT","width":168},{"text":"I EAT YOUR PACKET FOR LUNCH","width":73},{"text":"Right","width":13},{"text":"So","width":37},{"text":"There's two little problems right","width":133},{"text":"It's great for sending small amounts of information","width":399},{"text":"An amusing anecdote here is IPv6 has since designed jumbo packets","width":597},{"text":"Which can be up to 4GB in size","width":507},{"text":"I mention this because I find this amusing because right now ","width":147},{"text":"Most of the infrastructure spits on anything bigger than 1472 bytes","width":236},{"text":"And we've got spec that allows up to 4G","width":146},{"text":"Good luck getting that packet to go anywhere","width":163},{"text":"Maybe by the time you graduate we'll see jumbo packets floating around on the internet","width":280},{"text":"But the spec is there","width":153},{"text":"It's probably going to take a generation of electrical failures before we upgrade enough of the infrastructure before jumbo packets truly work","width":526},{"text":"You might be able to get it to work on your local subnet","width":287},{"text":"On your local router","width":124},{"text":"If you buy some very modern hardware","width":152},{"text":"But these days currently ","width":100},{"text":"UDP in practice","width":117},{"text":"Yes that's about the maximum size you send a packet","width":177},{"text":"So where is UDP actually used?","width":406},{"text":"You will see UDP packets for DNS","width":336},{"text":"domain name service","width":120},{"text":"So when you type in something like HEY","width":141},{"text":"I want to go to the host which say its bbc.com","width":305},{"text":"Somebody somewhere needs to know how to translate this address to an IPv4 or IPv6 address","width":748},{"text":"And the person","width":56},{"text":"The service","width":63},{"text":"Who knows how to do this is DNS","width":317},{"text":"Which cached this information","width":93},{"text":"So there's a whole hierarchical structure of servers that can convert hostnames and addresses to their relevant IP numbers","width":771},{"text":"To do this your machine sends out UDP packets","width":303},{"text":"And it may send out to 2 or 3 different DNS servers","width":318},{"text":"They might say Hey Im in a rush here","width":156},{"text":"And quick I need to know","width":68},{"text":"Who has the answer?","width":125},{"text":"So that's why we use DNS","width":87},{"text":"A single packet, if it gets lost, it doesn't matter","width":143},{"text":"I'm going to ask someone else as well","width":122},{"text":"If it times out I'll just send it again","width":136},{"text":"It's a simple kind of QUICK I NEED THIS","width":141},{"text":"and hopefully I'll get the response back as fast as possible","width":163},{"text":"Much faster than opening up a TCP connection","width":316},{"text":"So DNS traffic uses UDP","width":723},{"text":"Let's compare this with TCP","width":677},{"text":"So the TCP packets are much more uh complicated","width":440},{"text":"Here they are","width":37},{"text":"There's some similarities","width":227},{"text":"You'll notice that we've got a port number","width":310},{"text":"From the source and the destination","width":154},{"text":"Why do you think we need the source port?","width":695},{"text":"I'm sending you a packet to your server","width":194},{"text":"Why should I send you my source port?","width":268},{"text":"So you can respond","width":152},{"text":"So look there's multiple packets going out of different ports on my server all of the time","width":359},{"text":"When the other socket at the other end wants to send back some information it needs to know which port to send it to","width":520},{"text":"So  the source port is important because we'll need that for the destination","width":446},{"text":"We've also got a sequence number.","width":299},{"text":"Remember","width":39},{"text":"What does TCP try to do ?","width":67},{"text":"It tries to hide the fact that we're sending packets across","width":175},{"text":"We've kind of turned this into a stream","width":133},{"text":"But packets might get lost","width":64},{"text":"It might get duplicated","width":171},{"text":"So our trick is to keep track of the total number of bytes that we've successively sent in each direction","width":538},{"text":"So we'll mark each packet with where we are in the stream","width":399},{"text":"So we have a sequence number","width":85},{"text":"It represents the actual number of bytes that have been transferred in this direction so far","width":359},{"text":"So this means if we lose some packets","width":159},{"text":"The other end can say","width":144},{"text":"HEY","width":28},{"text":"I lost you. I lost you at this point","width":173},{"text":"","width":3},{"text":"Can you resend starting from here?","width":329},{"text":"And that's part of the acknowledgement number","width":124},{"text":"The other end of our connection can say I hear you","width":277},{"text":"I've got your message so far up to this point in the stream","width":681},{"text":"Right","width":192}]