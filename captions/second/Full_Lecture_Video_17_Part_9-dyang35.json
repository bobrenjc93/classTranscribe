[{"text":"Alright","width":192},{"text":"So I wanna make there be as many trees","width":128},{"text":"as possible so that I can have a lot of heights to add up","width":192},{"text":"So the worst case is gonna be basically when this thing is looking complete","width":384},{"text":"So","width":128},{"text":"We're gonna write a recurrence that tells me the sum of all of the heights of all of the subtrees","width":384},{"text":"in some trees of height h","width":192},{"text":"Some heap of height h, okay.","width":256},{"text":"So, our base case we're just gonna do zero this time","width":320},{"text":"'cause it ends up being simpler for us to use zero here","width":128},{"text":"I could use -1, but I'm gonna use zero","width":192},{"text":"Okay, so","width":64},{"text":"what is the height","width":128},{"text":"what is the sum of the heights of all of the subtrees in a binary tree of height zero?","width":384},{"text":"Zero. There's only one subtree, the tree rooted at root","width":256},{"text":"which has height zero","width":64},{"text":"so this is just, zero","width":128},{"text":"Okay","width":64},{"text":"What about in the general case?","width":128},{"text":"So S(h)","width":512},{"text":"in general, what is the sum of the heights, of all of the subtrees","width":384},{"text":"in some binary tree of height h?","width":256},{"text":"Hint, you'll use recursion here","width":384},{"text":"So in the worst case, again we're thinking of what is the worst this could be","width":256},{"text":"the worst this could be is if I've got two children both of which are h-1","width":256},{"text":"'cos I've to add up their total sums for h-1, right?","width":256},{"text":"So the worst case here is gonna be where I've got two children that are in fact, h-1","width":320},{"text":"So it's gonna be two, times S of h-1","width":320},{"text":"i don't know why I put a parenthesis there","width":192},{"text":"Okay","width":128},{"text":"So I've taken care of my children, what contribution does the current node add?","width":448},{"text":"Right","width":128},{"text":"The sum of all of the heights of all its subtrees, right?","width":192},{"text":"It's just gonna add an h","width":128},{"text":"Right, that the tree, like, we've taken care of sum of the heights of all of the subtrees below me","width":320},{"text":"so what's the height of the current subtree?","width":128},{"text":"Well, h, right? By definition.","width":128},{"text":"Okay","width":64},{"text":"So this is our recurrence","width":192},{"text":"This is a recursive function that tells me what is the height, ","width":192},{"text":"sorry, for a given height, what is the sum of the heights","width":256},{"text":"of all of the subtrees, in that tree, okay.","width":192},{"text":"This is equivalent to the worst case for our build heap algorithm, okay.","width":320},{"text":"The best case is maybe a little better, right, 'cos you don't have","width":192},{"text":"not all of the trees are h-1, so you don't have quite as much height work to do, right","width":320},{"text":"But this is modelling the worst case","width":128},{"text":"so this is as bad as it could ever be","width":256},{"text":"Alright","width":64},{"text":"Then I did unrolling with crazy closed form sums that you don't need to remember","width":320},{"text":"and arrived at some closed form that look like this","width":384},{"text":"That ends up being my formula for the sum of the heights of all of the subtrees in a tree of height h","width":384},{"text":"We wanna prove this closed form summation","width":128},{"text":"This closed form for our summation is actually correct","width":320},{"text":"by using induction, okay","width":256},{"text":"And we got our recurrence, you find the closed form and you prove by induction, right","width":320},{"text":"This should sort of start to feel formulaic","width":128},{"text":"whenever we've got our recurrence relation modelling a running time","width":192},{"text":"we use induction to prove it's correct","width":320},{"text":"Okay, so proof by induction on h","width":192},{"text":"our base case is gonna be when h is zero","width":128},{"text":"for this proof, 'cos we are only caring about non-empty things","width":256},{"text":"So","width":192},{"text":"S(0) is zero by definition ","width":320},{"text":"and if we apply our formula for h is zero, we get 2 to the one minus zero","width":448},{"text":"minus two","width":64},{"text":"why is it doing that, stop","width":384},{"text":"This is zero","width":448},{"text":"So our formula matches what the base case of the recurrence is","width":192},{"text":"so our formula is correct","width":128},{"text":"for h is zero","width":128},{"text":"So now let's show it's correct for general h","width":256},{"text":"So our inductive case is gonna be our","width":128},{"text":"oh this should be inductive","width":384},{"text":"Our inductive case is gonna be when h is bigger than zero, right","width":448},{"text":"'cos otherwise, base case, right?","width":128},{"text":"So if h is bigger than zero, then","width":192},{"text":"what is our inductive hypothesis going to say?","width":512},{"text":"For all k less than h","width":256},{"text":"S(k) is two to the k plus one minus k minus two, I think, right?","width":512},{"text":"Yes, okay","width":320},{"text":"Right, so my inductive hypothesis makes a claim about all ","width":256},{"text":"things that are smaller than, h","width":256},{"text":"and I'm gonna use that assumption to proof that it works for h, okay","width":512},{"text":"Well we have S(h) is","width":192},{"text":"2S(h-1)+h, by definition","width":768},{"text":"Okay, so then by the inductive hypothesis","width":384},{"text":"we see that","width":256},{"text":"this is equal to","width":192},{"text":"the S(h-1), the h-1 is a k, right","width":256},{"text":"that it's smaller than h, so I can apply my inductive hypothesis","width":192},{"text":"so I can just substitute in my formula here, which is","width":192},{"text":"two to the k plus one, for k is h-1","width":256},{"text":"so this is 2 to the h, minus k","width":192},{"text":"which is h-1, so minus h plus one, right?","width":384},{"text":"minus two, quantity, plus h, okay?","width":320},{"text":"So all I did was substitute in ","width":320},{"text":"the formula for the case of S(h-1), because h-1 satisfies the condition for being a k","width":576},{"text":"Now it's just algebra, so you know","width":256},{"text":"that is the same thing as minus 1, so this is","width":192},{"text":"2 to the h plus 1","width":128},{"text":"minus 2h minus 2 plus h, which","width":448},{"text":"is just minus h","width":384},{"text":"okay. Just math","width":192},{"text":"Okay","width":256},{"text":"So now we've got that S(h) is equal to our closed form, so we are done","width":256},{"text":"we have shown what we claimed, and that is that","width":256},{"text":"this is the","width":192},{"text":"closed form for our summation","width":512},{"text":"Okay","width":192},{"text":"So you got this crazy summation","width":64},{"text":"Again this summation is in terms of h","width":192}]