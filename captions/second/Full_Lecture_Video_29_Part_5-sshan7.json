[{"text":"Okay right","width":214},{"text":"Question for your neighbor and yourself","width":214},{"text":"Does the inode contain the filename?","width":227},{"text":"Choose now","width":142},{"text":"Hundred internet points if you get the correct answer","width":1186},{"text":"Okay","width":132},{"text":"Right","width":62},{"text":"If you think the answer is ","width":275},{"text":"No, it's not part of the inode","width":171},{"text":"give yourself a pat on the back or or or or or","width":223},{"text":"shake hands with your neighbor alright?","width":153},{"text":"if you thought the answer was yes","width":148},{"text":"exits are this way and this way","width":214},{"text":"there are still majors look there are still majors looking for other people","width":270},{"text":"no it does not, remember okay? it does not","width":153},{"text":"the inode, the file does not know about it's own file name","width":263},{"text":"okay? that's the most important thing the most important point today we've got today okay","width":299},{"text":"and it allows us then to do  the following,","width":191},{"text":"i can have same file","width":201},{"text":"appear twice in my file system","width":417},{"text":"this seems impossible","width":177},{"text":"if you still think the file name is the file","width":429},{"text":"how can i get","width":119},{"text":"a file to appear twice?","width":151},{"text":"in two different places","width":100},{"text":"what do i need to do?","width":106},{"text":"yes","width":133},{"text":"I could yep hard link it. what's actually to my directory entries?","width":594},{"text":"Yes! thank you! remember my directory entries are just name inode number","width":392},{"text":"Somewhere over the mountain I've got two entries","width":252},{"text":"With a name1 that goes to a node1","width":210},{"text":"and another one","width":103},{"text":"in another directory I've got a name to and it happens to point to the same inode number","width":407},{"text":"I've better singing otherwise anyway alright so","width":224},{"text":"thank you","width":43},{"text":"I just made that up okay","width":169},{"text":"Yeah so look here's one directory remember all the directory is just some data it","width":278},{"text":"all that data is just a name and an inode number","width":196},{"text":"inside another directory we've got  a different name somewhere","width":198},{"text":"but it happens to point to the same inode number","width":127},{"text":"My goodness! So if I go into these two directories try to actually open the file,","width":262},{"text":"I open up this file","width":162},{"text":"and you can talk about this file when you talk about inodes","width":153},{"text":"and I start reading the bytes I'm talking about the same file","width":166},{"text":"That means if I change the content of this file","width":199},{"text":"then that file in that other directory changes as well why?","width":261},{"text":"because it's the same beep file","width":351},{"text":"okay?","width":143},{"text":"This looks impossible if you're sitting at the command line and you know","width":252},{"text":"you got two shells open and you're actually changing the contents of one file ","width":254},{"text":"and you've got another one other here","width":74},{"text":"and you cd-ed to a different directory ","width":96},{"text":"Oh my goodness! this is crazy, no it's not","width":165},{"text":"just remember this, it's just an inode","width":149},{"text":"we've just got two different places that happen to refer to the same inode number","width":233},{"text":"okay how do I do that?","width":194},{"text":"I can use a hard link","width":467},{"text":"How do I do that? There's a command called ln","width":534},{"text":"So link allows me to make another entry","width":235},{"text":"to an existing file","width":165},{"text":"let's see if I can pull up the manpage a moment","width":1086},{"text":"So you type this into a terminal and congratulations you've now got two files, two entries","width":435},{"text":"which point to the same inode","width":168},{"text":"so you could type say for example link","width":193},{"text":"hey here's my file slash home blah blah blah blah blah","width":204},{"text":"uh file1","width":99},{"text":"this better exists so it can pull out the inode number of that file","width":192},{"text":"and then go somewhere else uh blhblahblahhblah file different name","width":775},{"text":"alright so for this magic to occur, we want to be able to know when those disk blocks become available ","width":398},{"text":"for resuse, that means an inode has to do this","width":655},{"text":"has to some reference counting","width":140},{"text":"in other words, how many directory entries ","width":267},{"text":"actually refer to this inode","width":169},{"text":"if i reduce that down to 0","width":103},{"text":"I know nobody cares about me","width":193},{"text":"alright and we can resuse that inode and we reuse the disk blocks associated with the file","width":489},{"text":"so everytime you link, we're gonna increment the reference count, ","width":245},{"text":"everytime we link you add a hard link","width":270},{"text":"we implement the reference count","width":451},{"text":"now you might wonder, can i do this with directories as well","width":369},{"text":"right? could could my filenames here be directories","width":397},{"text":"and the answer is","width":163},{"text":"yes kind of","width":122},{"text":"no","width":128},{"text":"right","width":58},{"text":"so why yeah kind of no, here's why","width":348},{"text":"the operating system the repair tools","width":215},{"text":"all assume that directories are tree based structure","width":359},{"text":"if you are allowed to start messing with this hard links for directories","width":339},{"text":"you could violate that assumption","width":186},{"text":"you could set up a directory which has two paths","width":224},{"text":"you could set up a uh file system hierarchy","width":293},{"text":"which never ends right? you keep going into subdirectories and you come back round to the top somewhere","width":406},{"text":"and so all of the tools for following inodes wouldn't be to complete","width":283},{"text":"so in practice, filesystems typically prevent you from doing this","width":370},{"text":"right? even root cannot do this on most file systems","width":203},{"text":"the file systems C code says Hahaha no","width":213},{"text":"right nice try but no","width":141},{"text":"right so you can only do this with with regular files you can't do it with directories","width":511},{"text":"Right","width":100},{"text":"Questions?","width":287},{"text":"So what have we said? we just said that","width":116},{"text":"hard link is easy we just make a","width":153},{"text":"another entry inside a directory with a different name for the same inode","width":408},{"text":"and you can do it using this link tool, this link command","width":512}]