[{"text":"okay, so what are we going to do we're going to take our data and push the bits somehow across multiple disks","width":587},{"text":"multiple physical disks and in that way we should be able to improve performance because now our i/o channels are talking to multiple disks simultaneously","width":596},{"text":"however, our disks are unreliable","width":261},{"text":"and if was to buy a disk today, the promised 30000 hours of performance before it failed, then if i had 100 disks that means that i expect my data on average to exists for two weeks before probability before it goes bad","width":1431},{"text":"the thirty thousand hours is not a big figure as soon as you have large disk arrays","width":424},{"text":"okay if you're wondering how big is thirty thousand hours, if you work forty hours you get to about 2000 hours per year ","width":794},{"text":"if you work 24 hours a day you get some small multiple of that","width":456},{"text":"so we're talking about a disk that supposedly lasts a few years","width":316},{"text":"and as you can see we've shortened it down to just two weeks ","width":183},{"text":"so we're going to have to think about how it'll solve this problem of making sure that our disks, our data is reliable if we have a disk failing on average every two weeks","width":862},{"text":"okay, so one thing we could do is simply copy the data to two disks!","width":501},{"text":"this is called mirroring and you today can go and buy little enclosures that support RAID 1","width":416},{"text":"and all they have is two identical disks and they send it to both","width":218},{"text":"and if one disk fails then it doesn't matter you've still got the data on your other disk","width":503},{"text":"hopefully the disk array tells you when one disk has died, and hopefully it tells you which disk has died because you're going to be replacing one of them right?","width":723},{"text":"so the good news is that if i do this, then my reads are suddenly typically twice as fast! because now i've got potentially two different disks from read from ","width":659},{"text":"so i can actually execute two reads concurrently at the same time and using the disk","width":380},{"text":"however in terms of writing i've got to bring both disks into sync and then so i have a lowest common denominator and so my writes are no faster","width":761},{"text":"plus i've doubled the cost of the storage and that's a hard pill to swallow, maybe we can do better than that well anyways there's RAID 1","width":650},{"text":"alright, today i'm just going to talk about RAID 1, raid 3, raid 5","width":269},{"text":"I don't want to confuse you with too many different levels, so we can at least see how these things were solved","width":316},{"text":"right so RAID 3 let's use parity codes","width":344},{"text":"and for this example we're going to choose odd even, we'll chose even parity ","width":487},{"text":"which means we're always going to write an even number of 1s","width":210},{"text":"so if you give me a value that has an odd number of ones in binary data, then my parity bit will also include a 1","width":660},{"text":"why don't i do that, well that means that i can recover my bits if any one of those bits are lost","width":938},{"text":"does that make sense?","width":196},{"text":"alright, didn't we play this game inside CS 125 right? ","width":444},{"text":"here, let me write down a number, here it is, and i'm going to make sure that i've written an even number of ones okay, there we go","width":591},{"text":"so here's the number you gave me, here's my parity bit","width":324},{"text":"if somebody came along and said haha! you can't have that bit anymore i'm not gonna tell you what it is","width":379},{"text":"then i can look across all of the bits i wrote and reverse engineer it, right? I can say","width":291},{"text":"oh look i've got an odd number of bits and therefore this missing bit must have been a 1","width":594},{"text":"great, so here's our plan, is that we'll buy another disk to store our parity bit in ","width":424},{"text":"and we'll have a say disk for every other bit","width":648},{"text":"so in my little example, if i'm writing bytes, octets, then i just need to buy 9 disks","width":504},{"text":"so i've already increased the cost of my system by one extra disk","width":504},{"text":"yes, the disk has gone ","width":324},{"text":"there is no disk, right?","width":71},{"text":"it's died","width":79},{"text":"we're not trying to deal with bad data, we're trying to deal with missing data","width":280},{"text":"literally the disk stops spinning","width":149},{"text":"it gets hot, whataever, right. it just makes awful clunking noises and refuses to talk","width":418},{"text":"yes, yes, right so this system's only good for being able to recover one bit ","width":491},{"text":"right, so i would need all of these in other disks","width":194},{"text":"alright so i have my disk 1, disk 3, disk 4, disk 5, disk 6","width":837},{"text":"okay any disadvantages to this?","width":123},{"text":"it's pretty cheap, yeah, but now my write performance is limited because i have to always be updating parity information as well","width":740},{"text":"okay so here's a little attempt with this. suppose i have a 4 bit computer and 4 bit data ","width":441},{"text":"then i've got my four disks, my data, and a check disk as well for storing the parity bit","width":359},{"text":"so if i'm storing this 1001","width":187},{"text":"great, that is already even, so i can just write zero, and in these other examples there is say for the light blue one","width":524},{"text":"i wrote an odd valued value, so my parity bit, my check disk, includes a 1","width":443},{"text":"right, let's kill a disk there we go. right so","width":277},{"text":"you now believe me that if one of my disks dies, oops, there we go. suffered from a small nuclear explosion","width":430},{"text":"then i can recover all of the data that was actually originally on that disk by reading all of my other disks ","width":668},{"text":"i can now write a little process and reverse engineers what should have been written on that disk 2","width":578},{"text":"and i do that for my entire data set","width":374},{"text":"okay","width":83},{"text":"there any problems with this? let's think about the chances of another disk dying whilest we're trying to recover the data","width":717},{"text":"so we've got this mean time to failure ","width":145},{"text":"and mean time to repair ","width":274},{"text":"and yeah we can recover the data but it assumes that bad things don't happen whilst we are doing the recovery process ","width":878},{"text":"so with raid 1, we'd copy all of the data off one good version back onto a new disk","width":465},{"text":"with raid 3, we need to go through all the data on all the disks using the parity to recover it","width":512}]