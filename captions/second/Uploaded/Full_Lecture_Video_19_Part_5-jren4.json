[{"text":"Okay. Are we ready? Page 2!","width":1073},{"text":"Let's so.. Okay here we go.","width":178},{"text":"What's a named pipe and unnamed pipe?","width":237},{"text":"So, I actually showed you in an example of an unnamed pipe.","width":305},{"text":"Where inside your c-code, you can say \"Okay, give me a pipe.\"","width":227},{"text":"And you pass it a reference to a little array and it fills that in with two file descriptors. That's an unnamed pipe.","width":417},{"text":"Does not exist anywhere other than inside the memory.","width":191},{"text":"There's actually another form of this, which isn't used very often. But it's called a named pipe.","width":479},{"text":"Which is something you can create apparently on the disk, and here's how you call it.","width":492},{"text":"You could say make fifo and give it a file name.","width":455},{"text":"Okay, so we'll call it a bag pipe.","width":259},{"text":"Anybody from Scotland here?","width":223},{"text":"Okay. ","width":273},{"text":"Right, so bag pipe is an instrument where you can set up a drone and you keep squeezing it, and you wear a kilt and you","width":738},{"text":"Stand on the great hills of Scotland.","width":121},{"text":"Alright, so that's a bag pipe. It seems to exist on the file system, and in fact the joy of using a bag pipe like this is that it's lifetime is independent of your process.","width":732},{"text":"The bag pipe will live for other processes","width":344},{"text":"And you can create it using this make fifo. ","width":217},{"text":"What do you think fifo stands for?","width":196},{"text":"First In First Out, right. So your first breadth into the bag pipe will be the first data that comes out when you try to read from this file.","width":533},{"text":"Except this is not a file. It's a pipe, so the order of the data.","width":335},{"text":"So reading from it and the writing of it doesn't behave like a file. It's like a queue. First-in First-out queue.","width":594},{"text":"They are not often use, but they are worth knowing about","width":467},{"text":"Remember signals? I'm not talking about con-sig. I'm talking about software interrupts we can do such as sigchild, sigint, sigkill.","width":610},{"text":"Pipes themselves have a signal","width":414},{"text":"Alright. You get a signal","width":1400},{"text":"If you send data down the pipe and no one is listening","width":524},{"text":"See, if a tree falls in a forest, does anybody hear it?","width":325},{"text":"As the writer, how can you discover that your reader has died?","width":323},{"text":"Is no longer listening to the data","width":135},{"text":"And here's how.","width":91},{"text":"Actually, you can get a software interrupt, you can get the signal.","width":208},{"text":"Say, Oh by the way, there is no one listening anymore. All the file descriptors have disappeared, have been closed.","width":696},{"text":"Maybe deliberately, or maybe the child process itself has finished, but guess what? You can send as much data we used, because you'll like try down this pipe, but there is no one there to read it anymore.","width":949},{"text":"So you get a sigpipe, so you can choose to handle that. You can set up a signal handler to say, \"Oh look, my reader from the pipe is not getting anymore data\"","width":834},{"text":"Now, a couple of comments on this.","width":445},{"text":"First of all, this means if you fork, then make sure you close the unwanted file descriptors","width":1378},{"text":"So what do I mean by that?","width":460},{"text":"Remember we did this kind of thing, we said \"Okay, give me two of these\", we call pipe. ","width":347},{"text":"Look how easy this is. Alright, so now I got my read and my write. Then I call fork","width":557},{"text":"So now, conceptually, we got four file descriptors. Yes, the child has two, the parent has two.","width":404},{"text":"But we're only going to use half of them.","width":250},{"text":"If the parent gonna do the writing, the parent does not need the read.","width":192},{"text":"If the child is gonna do the reading, it doesn't need the writing file descriptor.","width":397},{"text":"So a common pattern of this is in the child, the first thing you do is that you would close the one that you're not gonna use.","width":802},{"text":"So for example, we might close the second one, and in the parent, we do the same thing. ","width":789},{"text":"We close the first one, the read.","width":495}]