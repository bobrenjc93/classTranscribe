[{"text":"okay","width":277.18181824684143},{"text":"right lets run this, see what happens","width":232.18181824684143},{"text":"and it wont quite work, cus uhhh gcc will say \"hey I've no idea.. what\"","width":765.1818182468414},{"text":"uhhh doesn't know what sleep is, and shouldn't know what pthread is either","width":281.18181824684143},{"text":"so lets fix this","width":76.18181824684143},{"text":"we need uhmm","width":152.18181824684143},{"text":"pthread.h","width":93.18181824684143},{"text":"and also on our options down here","width":173.18181824684143},{"text":"we have to tell the compiler","width":93.18181824684143},{"text":"please","width":28.18181824684143},{"text":"I really wanna compile with pthread","width":275.18181824684143},{"text":"there we go","width":586.1818182468414},{"text":"... what. okay! ","width":144.18181824684143},{"text":"right great","width":58.18181824684143},{"text":"so it printed out..","width":198.18181824684143},{"text":"dead code..","width":187.18181824684143},{"text":"so what I want to show you is...","width":76.18181824684143},{"text":"look we passed in a pointer to something over here","width":218.18181824684143},{"text":"and then inside our function called beans, we just printed the pointer value","width":276.18181824684143},{"text":"we did not try to follow the pointer value","width":117.18181824684143},{"text":"if I tried to print out the string of deadcode","width":172.18181824684143},{"text":"my program will probably crash","width":96.18181824684143},{"text":"thats probably not a valid memory address to read","width":296.18181824684143},{"text":"okay ","width":33.18181824684143},{"text":"and now my machine is getting hot","width":196.18181824684143},{"text":"why? because there a cpu","width":64.18181824684143},{"text":"we're running","width":123.18181824684143},{"text":"uhmmm it it it, my program never finished","width":183.18181824684143},{"text":"right, the first cpu is still running","width":373.18181824684143},{"text":"so what have we just proved","width":71.18181824684143},{"text":"we proved","width":33.18181824684143},{"text":"that we can do two things at the same time","width":212.18181824684143},{"text":"inside one process","width":290.18181824684143},{"text":"what do you think happens","width":73.18181824684143},{"text":"if I make a hundred threads","width":526.1818182468414},{"text":"my machine ","width":53.18181824684143},{"text":"might only have say a couple of cpus","width":195.18181824684143},{"text":"so how is it going to run","width":146.18181824684143},{"text":"those threads","width":44.18181824684143},{"text":"if I've only got 2 actual cpus. yeah?","width":388.18181824684143},{"text":"so what I do, is it","width":123.18181824684143},{"text":"lets one thread run","width":80.18181824684143},{"text":"and when it finishes","width":66.18181824684143},{"text":"it says","width":23.18181824684143},{"text":"next thread I know youve been waiting for a while","width":133.18181824684143},{"text":"you can have the cpu next","width":87.18181824684143},{"text":"actually its cleverer than that","width":125.18181824684143},{"text":"every 10 milliseconds or so","width":194.18181824684143},{"text":"a little hardware timer goes off","width":110.18181824684143},{"text":"and the operating systems scheduler comes up","width":120.18181824684143},{"text":"and it says","width":37.18181824684143},{"text":"you have been having chocolate for too long. in other words you've been having the CPU for too long","width":266.18181824684143},{"text":"Im going to put you on pause and let this other thread","width":255.18181824684143},{"text":"that has been waiting for a while have access to the CPU and so that thread gets to run","width":256.18181824684143},{"text":"so the operating system","width":95.18181824684143},{"text":"treats memory, the cpu and other resouces","width":181.18181824684143},{"text":"as scarce resources","width":93.18181824684143},{"text":"and tries to allocate them very efficiently","width":123.18181824684143},{"text":"and the different parts of the running system","width":158.18181824684143},{"text":"that wants to have access","width":165.18181824684143},{"text":"and how we schedule that ","width":171.18181824684143},{"text":"is actually an area of research","width":206.18181824684143},{"text":"so we have passed in something. you've seen that","width":113.18181824684143},{"text":"what we have passed in here arrives as the pointer though here","width":281.18181824684143},{"text":"lets make our program","width":98.18181824684143},{"text":"return something","width":63.18181824684143},{"text":"so ","width":35.18181824684143},{"text":"I'll return another void pointer","width":139.18181824684143},{"text":"lets call it one two three four","width":193.18181824684143},{"text":"how do I get that from another thread?","width":290.18181824684143},{"text":"Well, this time I'm going to","width":85.18181824684143},{"text":"pthread join","width":555.1818182468414},{"text":"so pthread join","width":70.18181824684143},{"text":"is a bit like","width":116.18181824684143},{"text":"wait","width":98.18181824684143},{"text":"it says","width":86.18181824684143},{"text":"don't continue","width":65.18181824684143},{"text":"until this thread has finished","width":193.18181824684143},{"text":"and uhh","width":96.18181824684143},{"text":"lets just grab it","width":72.18181824684143},{"text":"okay","width":351.18181824684143},{"text":"here is the thread I care about","width":62.18181824684143},{"text":"so lets just pass in the id number","width":118.18181824684143},{"text":"that we have before","width":96.18181824684143},{"text":"and uhmm","width":80.18181824684143},{"text":"I better have","width":331.18181824684143},{"text":"somewhere to store it","width":72.18181824684143},{"text":"right","width":11.18181824684143},{"text":"so now I just need a void pointer","width":366.18181824684143},{"text":"and I need the address of that void pointer","width":253.18181824684143},{"text":"and so lets finally print out the value of that","width":751.1818182468414},{"text":"okay, so","width":24.18181824684143},{"text":"what did we see of it here","width":255.18181824684143},{"text":"we still have two threads","width":143.18181824684143},{"text":"then the new thread","width":42.18181824684143},{"text":"the second thread","width":44.18181824684143},{"text":"slept for 2 seconds","width":176.18181824684143},{"text":"meanwhile, the main thread","width":111.18181824684143},{"text":"the first thread say","width":86.18181824684143},{"text":"okay","width":22.18181824684143},{"text":"I'm just going to join","width":87.18181824684143},{"text":"so it gets paused","width":138.18181824684143},{"text":"because its waiting for that second thread to finish","width":146.18181824684143},{"text":"and then the second thread finally prints out something","width":267.18181824684143},{"text":"prints out what it is given and then returns a vlue","width":247.18181824684143},{"text":"which we can then get back fromthe first thread using pthread join","width":392.18181824684143},{"text":"theres another way to exit threads","width":177.18181824684143},{"text":"and that way is called pthread_exit","width":319.18181824684143},{"text":"right","width":11.18181824684143},{"text":"so lets exit with something","width":97.18181824684143},{"text":"uhhh","width":46.18181824684143},{"text":"lets exit with","width":160.18181824684143},{"text":"ohh I dont know","width":217.18181824684143},{"text":"hello!","width":605.1818182468414},{"text":"oh, wrong way","width":733.1818182468414},{"text":"did I...","width":630.1818182468414},{"text":"ohh, yes","width":140.18181824684143},{"text":"okay and we'll","width":63.18181824684143},{"text":"cast it as a void ** pointer","width":56.18181824684143},{"text":"there we go","width":244.18181824684143},{"text":"if you call pthread_exit","width":128.18181824684143},{"text":"you're never going to execute, that thread is never going to execute more code after that point. you're telling the system","width":326.18181824684143},{"text":"Im done with this","width":77.18181824684143},{"text":"but my cpu for this thread","width":96.18181824684143},{"text":"does not need to execute","width":86.18181824684143},{"text":"any more","width":178.18181824684143},{"text":"so this time","width":80.18181824684143},{"text":"my thread called pthread_join","width":153.18181824684143},{"text":"prints out","width":25.18181824684143},{"text":"hello world and hello","width":136.18181824684143},{"text":"instead of the other return value","width":211.18181824684143},{"text":"soo","width":199.18181824684143},{"text":"pthread_join","width":104.18181824684143},{"text":"the exit here basically says","width":152.18181824684143},{"text":"I'm done","width":81.18181824684143},{"text":"and with that","width":77.18181824684143},{"text":"we've finished","width":113.18181824684143},{"text":"have a wonderful section tomorrow","width":138.18181824684143},{"text":"if you have any questions about it come down and ask me now","width":291.18181824684143},{"text":"there were three students","width":60.18181824684143},{"text":"that failed to put their exam key","width":118.18181824684143},{"text":"and by the way your quiz scores are in your subversion","width":267.18181824684143},{"text":"if you are one of those students that didn't buble in your exam key","width":204.18181824684143},{"text":"come down and we'll sort that out now","width":194.18181824684143}]