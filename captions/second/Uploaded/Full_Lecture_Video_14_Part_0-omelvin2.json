[{"text":"Now let's get started. Your stuck with me for one more day and not only that, I have a cold, so I apologize for any sniffling or coughing I might do in your ears. I think we can get through this okay, I'll just make you guys talk more. ","width":1324.1818182468414},{"text":"We didn't quite finish up talking about the reader-writer problem so I put it on you guys to come up with a better solution","width":552.1818182468414},{"text":"But just to go back a little bit, we left off with this improved solution.","width":494.18181824684143},{"text":"It wasn't quite as perfect as written on the page.","width":280.18181824684143},{"text":"We have the lock and we do while our writing and then we do some reading and then we tell them that there's a reader","width":699.1818182468414},{"text":"And then when it's done we do some reader, then when it's done we tell the reader's gone. ","width":283.18181824684143},{"text":"And then we signal that someone else can take the turn","width":353.18181824684143},{"text":"And then we unlock the lock","width":120.18181824684143},{"text":"And then pretty much the same thing on the writer side","width":192.18181824684143},{"text":"There were three problems with this","width":427.18181824684143},{"text":"Two of them were problematic and one of them was functional - completely functional. What are some simple fixes we can make? What was the first problem?","width":1003.1818182468414},{"text":"Yeah so what is happening here; who's getting woken up here?","width":380.18181824684143},{"text":"Only one reader. Only one reader. So we want to make sure we wake up all the readers so we do a cond_broadcast","width":828.1818182468414},{"text":"What are the other problems? What part if it is causing that? ","width":755.1818182468414},{"text":"So the lock/unlock being here, right. Okay, I lock, so no one else can get into that critical section until I unlock. Which means we only allow one reader at a time. How do we fix this?","width":1655.1818182468414},{"text":"Do I have to do the same thing for the writer? Why not? We only want one writer anyway, okay.","width":539.1818182468414},{"text":"This works, there's nothing functional wrong with this. This is good, now we get our multiple readers, multiple writers","width":415.18181824684143},{"text":"But it still has one more problem. Anyone remember what it is?","width":556.1818182468414},{"text":"Yeah? Yes, so the writer--what's stopping the writer from getting in?","width":618.1818182468414},{"text":"This right here. We only have one writer, so I don't need to worry about this","width":408.18181824684143},{"text":"Okay. And it means that unless the writer has gotten into the critical section, every reader that comes along--once one reader comes along and gets in, the writer gets blocked","width":821.1818182468414},{"text":"And now readers come in, readers leave, readers come in, readers leave. If that reader count never goes down to 0 we're going to starve the writer.","width":554.1818182468414},{"text":"In the real world this could be a really bad thing because I could be making a change, and delaying that update that the writer is trying to make. And the readers are working on old data. So this is not a good thing to starve our writers.","width":963.1818182468414},{"text":"And the goal for the last part of the class was to write a better solution","width":510.18181824684143},{"text":"I asked you guys to think about this while you were away from class. I can give you two minutes to think about it and pull it back in again then we can go over the solution","width":730.1818182468414},{"text":"Talk to your neighbors. Think about what you would do to fix this and make it work","width":278.18181824684143},{"text":"[silence while the class works]","width":6548.181818246841}]