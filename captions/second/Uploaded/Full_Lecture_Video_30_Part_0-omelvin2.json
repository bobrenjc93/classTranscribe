[{"text":"alright, let's try that","width":9007.181818246841},{"text":"alright, good morning ladies and gentlemen","width":159.18181824684143},{"text":"minor technical difficulties this morning","width":138.18181824684143},{"text":"my laptop decided to freeze","width":124.18181824684143},{"text":"one second out of four","width":140.18181824684143},{"text":"never seen that before, guess it must be because we're trying to have a demo today","width":250.18181824684143},{"text":"right, so here's what we're going to do today","width":103.18181824684143},{"text":"I'm going to introduce you to one of the coolest things you can do in system programming","width":217.18181824684143},{"text":"and that is memory-mapped files","width":206.18181824684143},{"text":"so cast your mind back to when we said that","width":231.18181824684143},{"text":"we had virtual memory and our addresses are mapped to different parts of physical memory","width":440.18181824684143},{"text":"and this happens magically without our programs having to do anything","width":223.18181824684143},{"text":"well now we need to actually take control of that mechanism","width":213.18181824684143},{"text":"and we can ask for a file on disk","width":263.18181824684143},{"text":"to be mapped directly into our memory","width":203.18181824684143},{"text":"that's pretty cool if you think about it","width":84.18181824684143},{"text":"if you actually had, say, some structured data","width":118.18181824684143},{"text":"on memory, you could immediately jump to a certain area of the file","width":193.18181824684143},{"text":"and read it, without having to write","width":149.18181824684143},{"text":"read calls, fread calls, fc calls, that kind of stuff","width":203.18181824684143},{"text":"you can just say: \"Hey! I know where is is in memory","width":116.18181824684143},{"text":"I can just read that memory\"","width":123.18181824684143},{"text":"and the operating system will say \"Hah!","width":144.18181824684143},{"text":"I don't have those particular bytes","width":143.18181824684143},{"text":"actually on RAM yet, let me do it for you! Hold on a second","width":166.18181824684143},{"text":"we'll pause your process, and we'll pull in those bytes","width":186.18181824684143},{"text":"and we'll release you again","width":106.18181824684143},{"text":"so you can immediately see the contents of the file.\"","width":183.18181824684143},{"text":"The other cool thing we can do with this","width":118.18181824684143},{"text":"is if we mapped","width":146.18181824684143},{"text":"some memory using mmap","width":161.18181824684143},{"text":"and we then fork()","width":140.18181824684143},{"text":"we can now communicate between two processes","width":202.18181824684143},{"text":"directly, using some memory addresses","width":220.18181824684143},{"text":"so we'll play with that today","width":114.18181824684143},{"text":"if I can get my laptop to restart","width":123.18181824684143},{"text":"and play","width":195.18181824684143},{"text":"play correctly, okay","width":656.1818182468414},{"text":"alright so whilst that is ","width":137.18181824684143},{"text":"warming up. I've set it to gas mark 350div class=\"caption-track-final-caption ui-resizable\" draggable=\"true\" contenteditable=\"true\" style=\"width:8832px\">alright, let's try that<div class=\"ui-resizable-handle ui-resizable-e\" style=\"z-index: 90;\"></div></div>fwwar","width":208.18181824684143},{"text":"let me tell you about a couple of useful commands here","width":156.18181824684143},{"text":"one is dd","width":130.18181824684143},{"text":"so if you ever want to just copy some bytes","width":149.18181824684143},{"text":"from one place to another","width":144.18181824684143},{"text":"and you want to take control of exactly how many bytes","width":226.18181824684143},{"text":"to copy rather than, say, copying the whole file,","width":135.18181824684143},{"text":"dd is useful","width":122.18181824684143},{"text":"it will open","width":100.18181824684143},{"text":"one path","width":63.18181824684143},{"text":"and open a right path","width":96.18181824684143},{"text":"and you can say how many bytes to copy","width":99.18181824684143},{"text":"so, for example, the following copies some bytes","width":183.18181824684143},{"text":"from /dev/urandom to ~ (tilde)","width":183.18181824684143},{"text":"okay you and I know that ~ (tilde) means...","width":224.18181824684143},{"text":"the dog was here","width":43.18181824684143},{"text":"yes, that","width":57.18181824684143},{"text":"it means my home directory","width":94.18181824684143},{"text":"so I'm going to make a file called \"secret.txt\"","width":185.18181824684143},{"text":"hopefully the NSA doesn't try to decrypt this file","width":135.18181824684143},{"text":"because, in fact, it's just random bytes","width":102.18181824684143},{"text":"(evil laughter)","width":144.18181824684143},{"text":"and how big should it be?","width":93.18181824684143},{"text":"well, I want each block size to be 1k and count of 1024","width":263.18181824684143},{"text":"in other words","width":52.18181824684143},{"text":"my total file size will be a megabyte","width":214.18181824684143},{"text":"I could, if I wanted to overwrite my secret file","width":236.18181824684143},{"text":"start reading bytes from /dev/zero","width":193.18181824684143},{"text":"and again the file's going to be the samedfan","width":153.18181824684143},{"text":"and again, I'm going to make a file that is the same size","width":288.18181824684143},{"text":"equivalently, I could have set my block size to be","width":523.1818182468414},{"text":"1 byte, and","width":233.18181824684143},{"text":"put in a million here or whatever ","width":97.18181824684143},{"text":"[gibberish]","width":104.18181824684143},{"text":"so we'll pretend I know that calculation","width":191.18181824684143},{"text":"there we go","width":117.18181824684143},{"text":"and that would've caused the same number of bytes","width":85.18181824684143},{"text":"but it wouldn't have been quite so efficient","width":153.18181824684143},{"text":"we would have made very small calls so it would have been a little bit slower","width":290.18181824684143},{"text":"I can also use","width":197.18181824684143},{"text":"the following file as a place to send my output","width":180.18181824684143},{"text":"/dev/null","width":134.18181824684143},{"text":"here's some wonderful things about storing things inside /dev/null :","width":225.18181824684143},{"text":"you can store as much as you want inside /dev/null","width":459.18181824684143},{"text":"but it ain't coming back","width":261.18181824684143},{"text":"so this is perfect place to store your","width":213.18181824684143},{"text":"your love letters from past girlfriends, dogs, cats, goldfish, whatever","width":424.18181824684143},{"text":"because no one will ever find them","width":337.18181824684143},{"text":"that you've got this perfect storage","width":113.18181824684143},{"text":"of course, it's infinitely compressable as well","width":133.18181824684143},{"text":"you can send as many bytes as you want to /dev/null, and it won't use any disk space","width":244.18181824684143},{"text":"why? it's not a real place in your disk","width":255.18181824684143},{"text":"it's not part of your disk's filesystem","width":350.18181824684143},{"text":"there's something special about this /dev","width":286.18181824684143},{"text":"you won't find it actually listed in your disk","width":231.18181824684143},{"text":"anywhere, oh good my machine has booted up, now we can actually play","width":639.1818182468414},{"text":"instead, it's a virtual filesystem","width":908.1818182468414},{"text":"hooray! okay good","width":552.1818182468414},{"text":"okay, right, so","width":67.18181824684143},{"text":"let's go into, what have I got","width":266.18181824684143},{"text":"so I want to find anything that talks about","width":136.18181824684143},{"text":"CS and ends in a '1'","width":228.18181824684143},{"text":"so that star is an example of globbing","width":153.18181824684143},{"text":"the filesystem doesn't do that; the shell does","width":244.18181824684143},{"text":"the shell says \"Okay, I'll try to find all matching things that match that pattern","width":296.18181824684143},{"text":"you could have done that for parshell for example","width":192.18181824684143},{"text":"anyway, so let's go into our demo two today","width":287.18181824684143}]