[{"text":"so let's change our permissions","width":425.18181824684143},{"text":"so change mod, and I will change it to now","width":381.18181824684143},{"text":"what's a reasonable permission for directories?","width":134.18181824684143},{"text":"well maybe we want to be able to read write it and execute it, of course","width":230.18181824684143},{"text":"and we want other people to be able to read and execute it, so if I do that","width":437.18181824684143},{"text":"then now I can make my file","width":428.18181824684143},{"text":"and now if I do a d so I can actually see the subdirectory itself","width":573.1818182468414},{"text":"you'll see that yes, we're a directory","width":102.18181824684143},{"text":"and yes, I've got the read write execute for myself and execute and read for everybody else","width":611.1818182468414},{"text":"that was a very quick introduction to umasks and touching things","width":348.18181824684143},{"text":"and file globbing. Any quick questions about this?","width":356.18181824684143},{"text":"Alright, conceptually not hard, as I said the only surprise","width":173.18181824684143},{"text":"is that for directories, two bits is the execute bit","width":957.1818182468414},{"text":"that controls whether you can see inside","width":351.18181824684143},{"text":"the directory","width":103.18181824684143},{"text":"so no the directory's name, but whether you can actually go in and see the contents of a directory","width":318.18181824684143},{"text":"what files and other directories did I put inside of it","width":156.18181824684143},{"text":"and for the umask, remember it's a mask","width":335.18181824684143},{"text":"you're subtracting things that otherwise would have been set","width":250.18181824684143},{"text":"and it's only for new files and directories","width":1221.1818182468414},{"text":"so nothing conceptually very hard","width":203.18181824684143},{"text":"now, here's the fun part, let's","width":234.18181824684143},{"text":"let's have a look at some of these other filesystems","width":178.18181824684143},{"text":"I've already mentioned /dev as ","width":194.18181824684143},{"text":"this completely different filesystem that's not actually a part of my disk","width":305.18181824684143},{"text":"and so that's the big idea, that I've got one","width":227.18181824684143},{"text":"set of paths in","width":164.18181824684143},{"text":"POSIX that I start with slash","width":213.18181824684143},{"text":"and go from there, everything's underneath this single slash","width":214.18181824684143},{"text":"all of my other things that I want to add","width":138.18181824684143},{"text":"all of my USB keys I put in","width":126.18181824684143},{"text":"all of my virtual directories and","width":308.18181824684143},{"text":"virtual filesystems are going to be underneath this root","width":369.18181824684143},{"text":"Windows used to have a different idea, it would say","width":233.18181824684143},{"text":"I'll put one disk inside of C:\\, I'll put one disk inside of D:\\","width":249.18181824684143},{"text":"and we better not have more than 26 disks or we'll run out of letters","width":297.18181824684143},{"text":"that was the old kind of DOS way of doing things, thank goodness we've gone past that now","width":264.18181824684143},{"text":"but anyways back in POSIX","width":113.18181824684143},{"text":"we all start here, and we can add the virtual filesystems","width":387.18181824684143},{"text":"underneath specific directories of our filesystem","width":240.18181824684143},{"text":"so we've got /dev, there's a couple of others","width":310.18181824684143},{"text":"here they are:","width":185.18181824684143},{"text":"/proc and /sys","width":280.18181824684143},{"text":"right, so how can we find out about these?","width":177.18181824684143},{"text":"glad you asked! Let's have a look at a little demo here","width":801.1818182468414},{"text":"I want you to cast your mind back to","width":229.18181824684143},{"text":"before you were born and","width":241.18181824684143},{"text":"filesystems were heavy","width":258.18181824684143},{"text":"not something you would carry around in your pocket","width":166.18181824684143},{"text":"but literally something you had to lift with both hands","width":251.18181824684143},{"text":"because it was a huge tape, a huge disk","width":200.18181824684143},{"text":"and you'd lift it and you'd mount it onto a spindle","width":164.18181824684143},{"text":"and spin it up","width":237.18181824684143},{"text":"the command for looking at and thinking about filesystems is mount","width":403.18181824684143},{"text":"tell me what's mounted, tell me what's been put into my machine","width":245.18181824684143},{"text":"and by default we get a big list and we can see it","width":233.18181824684143},{"text":"and we discover, oh look, I've got a whole load of different filesystems","width":268.18181824684143},{"text":"mounted on different points inside of my filesystem","width":159.18181824684143},{"text":"so I've got one called /srv","width":237.18181824684143},{"text":"some of these are going out onto the network, etc","width":203.18181824684143},{"text":"I've got something called tmp","width":75.18181824684143},{"text":"oh, here are the one's I've just been talking about, /proc and /sys","width":295.18181824684143},{"text":"and there'd be /dev somewhere aswell","width":263.18181824684143},{"text":"so there are different types","width":164.18181824684143},{"text":"a lot of the ones we're looking at here, as you can see, are ext4","width":247.18181824684143},{"text":"which is the modern-day equivalent of ext2 which we've already studied","width":405.18181824684143},{"text":"and we could add more to this","width":95.18181824684143},{"text":"so if we plug in a USB key, for example","width":135.18181824684143},{"text":"you would see it appear here","width":128.18181824684143},{"text":"if I mounted a DVD or CD it would appear here","width":262.18181824684143},{"text":"our filesystems don't need to be on external devices","width":215.18181824684143},{"text":"they can even be inside of a file","width":221.18181824684143},{"text":"so here's a file I downloaded earlier","width":342.18181824684143},{"text":"it's a .iso image","width":128.18181824684143},{"text":"meaning that I could copy these bytes using, which command?","width":377.18181824684143},{"text":"dd, yes, onto a say USB key","width":289.18181824684143},{"text":"or onto a DVD-ROM, but","width":261.18181824684143},{"text":"I actually want to have a look to see what's inside this file","width":349.18181824684143},{"text":"it's just a sequence of bytes, it's just a filet'","width":156.18181824684143},{"text":"but allegedly this is actually a filesystem inside this file","width":362.18181824684143},{"text":"so how can we do that?","width":105.18181824684143},{"text":"first of all we need to make a directory","width":128.18181824684143},{"text":"where we're going to mount this filesystem","width":265.18181824684143},{"text":"so let me call it stuff","width":269.18181824684143},{"text":"and you know right now if I look inside stuff there's nothing there!","width":272.18181824684143},{"text":"oops, cannot open directory? why is that?","width":408.18181824684143},{"text":"probably because my umask, oh alright, okay, thank you umask","width":348.18181824684143},{"text":"fix my umask, okay","width":102.18181824684143},{"text":"make directory stuff2","width":399.18181824684143},{"text":"so there's nothing inside of that directory","width":125.18181824684143},{"text":"what I'm going to do now is that that iso file","width":166.18181824684143},{"text":"and say to the kernal, \"Treat this file that I just downloaded using wget","width":493.18181824684143},{"text":"and pretend that it's a real disk somewhere and start being able to read from it\"","width":369.18181824684143},{"text":"now you know that when you write disk commands","width":161.18181824684143},{"text":"you actually read in chunks, not at a byte at a time","width":203.18181824684143},{"text":"we're not doing fseek() and fread(), we want to read 4K blocks","width":239.18181824684143},{"text":"so we need one additional magic command with mount","width":191.18181824684143},{"text":"to say, okay, loop it back and wrap it","width":216.18181824684143},{"text":"wrap this this file and turn it and treat it as if it's a full","width":289.18181824684143},{"text":"as if it is a block-based device","width":248.18181824684143},{"text":"so let's do this, let's switch into root mode here","width":447.18181824684143},{"text":"okay, where's my little file?","width":162.18181824684143},{"text":"let me play with globbing, so there we go","width":165.18181824684143},{"text":"match any files that start with that, and I know it's just one of them today","width":240.18181824684143},{"text":"okay, and I want to mount it on a particular directory","width":204.18181824684143},{"text":"so, we had stuff2","width":223.18181824684143},{"text":"oh, it didn't work because I didn't add the loop option","width":194.18181824684143},{"text":"yes the .iso file I want to treat as a block-based device","width":306.18181824684143},{"text":"so I need that one last option. Great, it works, and now","width":151.18181824684143},{"text":"we can, if I look at my mount listings, see that we've got that file","width":398.18181824684143},{"text":"mounted inside of my directory as this iso9660","width":239.18181824684143},{"text":"which is a standard for CD-based filesystems","width":259.18181824684143},{"text":"and it's using particular loop-based device to turn it into a block-based device","width":256.18181824684143},{"text":"great, let's go and have a look","width":77.18181824684143}]