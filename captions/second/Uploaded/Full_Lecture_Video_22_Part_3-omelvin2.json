[{"text":"so we'll get that and HTTP/1.0","width":497.18181824684143},{"text":"okay, right!","width":107.18181824684143},{"text":"and I get a big chunk of text, including stuff that says","width":230.18181824684143},{"text":"\"Hey, maybe you want to use Javascript as well\"","width":189.18181824684143},{"text":"alright, so I'm getting a little bit of text, of a script on that page","width":363.18181824684143},{"text":"and finally","width":207.18181824684143},{"text":"we see these tags down here, </body>, </html>","width":227.18181824684143},{"text":"is that part of the HTTP protocol? No!","width":165.18181824684143},{"text":"what is it?","width":107.18181824684143},{"text":"it's HTML!","width":83.18181824684143},{"text":"HTML is independent of our network protocol","width":254.18181824684143},{"text":"HTML is just a way to describe a webpage","width":328.18181824684143},{"text":"and of course you can save that on a file","width":253.18181824684143},{"text":"you can save it on a USB stick","width":143.18181824684143},{"text":"HTML is completely independent of HTTP, so HTTP is about talking to web servers","width":323.18181824684143},{"text":"HTML is about how to mark up web pages","width":209.18181824684143},{"text":"they are two different protocols","width":214.18181824684143},{"text":"so we've shown that I can use this little tele-command to talk to webservers and this number 80 here is a port number","width":765.1818182468414},{"text":"if you want to run things on port 80, you can't","width":243.18181824684143},{"text":"unless, you run it as root","width":257.18181824684143},{"text":"so, the lower port numbers","width":134.18181824684143},{"text":"port numbers 0, 1, up to 1023, require you to be an administrator on the machine","width":486.18181824684143},{"text":"which is great because you will have a virtual machine now, that you can root into","width":254.18181824684143},{"text":"you can do sudo, or you can log in as root, and you can then set up a web server on that machine on port 80 ","width":490.18181824684143},{"text":"let's see what we're going to do today","width":86.18181824684143},{"text":"we're going to write some code that basically does this from C","width":292.18181824684143},{"text":"so we're going to connect to another machine","width":168.18181824684143},{"text":"so this is kind of what was enough for you to write half of Yik-Yak, if you'd like","width":311.18181824684143},{"text":"at least the client end","width":188.18181824684143},{"text":"here's some code I wrote earlier","width":317.18181824684143},{"text":"perfect timing","width":323.18181824684143},{"text":"and this is the beginnings then, of what network coding looks like","width":517.1818182468414},{"text":"now","width":147.18181824684143},{"text":"what we're actually going to create is something called a socket","width":213.18181824684143},{"text":"so a socket is","width":113.18181824684143},{"text":"a system object ","width":133.18181824684143},{"text":"not a C++ object, of course","width":86.18181824684143},{"text":"but just an object that represents the connection endpoint","width":338.18181824684143},{"text":"that we can send bytes into and get bytes back from","width":228.18181824684143},{"text":"so it's like a, think of it like a socket you can plug into","width":342.18181824684143},{"text":"it's going to be a way for us to communicate with remote servers and also weigh a socket's","width":437.18181824684143},{"text":"you can set options on a socket","width":113.18181824684143},{"text":"we're not going to do anything fancy today","width":260.18181824684143},{"text":"but how to identify sockets?","width":78.18181824684143},{"text":"easy","width":33.18181824684143},{"text":"just with","width":371.18181824684143},{"text":"a file descriptor","width":94.18181824684143},{"text":"so this will just be a small number","width":169.18181824684143},{"text":"and once we've done all this magic, we can just call read and write on this socket descriptor, and use it just like an open file","width":947.1818182468414},{"text":"so let's what we've got here","width":137.18181824684143},{"text":"i'm going discuss this amazing beast","width":243.18181824684143},{"text":"this didn't used to be inside CS 241","width":189.18181824684143},{"text":"or any networking class, this is relatively a new addition: get address info, and it makes writing network code much, much easier","width":405.18181824684143},{"text":"it does so much for us, it sets a whole lot of C structures for us","width":263.18181824684143},{"text":"and it can be used in a variety of ways, we're going to look at one way today, which is to go from","width":415.18181824684143},{"text":"a host name that we understand","width":132.18181824684143},{"text":"a fully qualified name here, like \"www.illinois.edu\"","width":182.18181824684143},{"text":"and turn that into an IP address","width":217.18181824684143},{"text":"a binary number","width":495.18181824684143},{"text":"so to use it","width":152.18181824684143},{"text":"we actually have to create a little struct","width":237.18181824684143},{"text":"notice the struct name is the same as the function","width":293.18181824684143},{"text":"getaddrinfo","width":90.18181824684143},{"text":"but in fact, there's going to be two structs","width":123.18181824684143},{"text":"we set one up as a kind of \"hints\" structure, to say this is the kind of stuff that I'd like to know about","width":401.18181824684143},{"text":"and we get back a pointer to a different struct","width":273.18181824684143},{"text":"of the same type","width":100.18181824684143},{"text":"so that's why I have","width":107.18181824684143},{"text":"one called \"hints\" and one called \"Okay, yeah. I'm also going to need a pointer to one\"","width":218.18181824684143},{"text":"so I'm not going to set up result, that was going to be set up for me","width":201.18181824684143},{"text":"and if you look down here, you'll see that we pass in not the pointer, but a pointer to that pointer","width":353.18181824684143},{"text":"because this function is going to mess with that pointer","width":166.18181824684143},{"text":"it's going to set that pointer to the completed information","width":478.18181824684143},{"text":"right","width":57.18181824684143},{"text":"so, what do we care about today? ","width":102.18181824684143},{"text":"well, I would like to have information for connecting with an IP","width":534.1818182468414},{"text":"version 4, so I want to make a connection","width":127.18181824684143},{"text":"yeah, yeah, just like 95% of the rest of the internet traffic using using version 4","width":399.18181824684143},{"text":"and I want to use TCP","width":167.18181824684143},{"text":"and as we know, TCP is a stream, it's like a pipe","width":327.18181824684143},{"text":"and these constants are kind of hard to remember, don't panic in an exam","width":250.18181824684143},{"text":"I give you a crib sheet","width":90.18181824684143},{"text":"but also, just as a hint, notice that they always come in this variety where the AF corresponds to a hint for you about what things should this be connected with?","width":835.1818182468414},{"text":"so sock, for example, the kind of socket type is a prefix as to what this constant should be","width":577.1818182468414},{"text":"now these constants are just integers","width":210.18181824684143},{"text":"they're just there to make our code look more readable as opposed to hard-coding constants","width":326.18181824684143},{"text":"unfortunately, it can mean then that you can accidentally put the wrong constant into the wrong field, and the compiler won't complain","width":456.18181824684143},{"text":"your code simply won't work","width":215.18181824684143},{"text":"now, writing network code is hard","width":293.18181824684143},{"text":"because","width":168.18181824684143},{"text":"it's like going to McDonald's, where everybody inside working there hates you","width":309.18181824684143},{"text":"unless you specify everything exactly correctly","width":314.18181824684143},{"text":"nothing comes out the window at the ned","width":209.18181824684143},{"text":"like doing a drive-thru and trying to do it with an English accent","width":188.18181824684143},{"text":"I have a really hard time at McDonald's","width":353.18181824684143},{"text":"\"You want fries with that?\", and I'll say something, it doesn't really matter what I say, and I never get fries","width":442.18181824684143},{"text":"so when new is desperately working trying to figure how to say ","width":206.18181824684143},{"text":"another fun thing with an English accent is the phone things, you know","width":353.18181824684143},{"text":"like say \"one\" to \"one\"","width":155.18181824684143},{"text":"I never get anywhere","width":174.18181824684143},{"text":"so this is the fun of networking code is that you've got to specify things exactly and you've got to be on your tip-toes to make sure you haven't accidentally put the wrong constant in the wrong field because no one will tell you've made a mistake","width":968.1818182468414},{"text":"right, that's the first gotcha","width":97.18181824684143},{"text":"is give the right constants for the right fields","width":925.1818182468414},{"text":"the next gotcha","width":190.18181824684143},{"text":"at least for this code, is","width":168.18181824684143},{"text":"for the unused fields, we better set them to 0","width":278.18181824684143},{"text":"and that's the purpose of this memset","width":130.18181824684143},{"text":"there's a whole load of things in this struct that I don't want to set","width":244.18181824684143},{"text":"and if I don't do this memset","width":283.18181824684143},{"text":"and this is just on the stack","width":101.18181824684143},{"text":"then as you know, the stack memory is arbitrary","width":201.18181824684143},{"text":"so","width":93.18181824684143},{"text":"make sure that you've set unused fields to 0","width":279.18181824684143}]