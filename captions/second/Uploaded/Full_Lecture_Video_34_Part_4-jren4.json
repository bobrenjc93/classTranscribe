[{"text":" alright so we've got five threads walked into a barrie ow!","width":516},{"text":"what do we have going on here? well each time they walk into a barrier, they try to wait on A and then they increment a count","width":537},{"text":"if the count is something, hey let's post to the other semaphore","width":288},{"text":"and then let's always post to something else","width":239},{"text":"so this first semaphore sA looks like it's being used to define a critical section","width":607},{"text":"why should this be inside the critical section?","width":449},{"text":"we only want one thread at at time to be incrementing count or checking its value","width":280},{"text":"so if we make this post back to A","width":354},{"text":"then we can ensure that one thread at a time is incrementing the count so we can't have a race condition","width":581},{"text":"so that suggests the first value of sA is what?","width":309},{"text":"one, yes!","width":77},{"text":"so we allow one thread through but if another thread comes at the same time, it's forced to wait until the first thread has posted","width":653},{"text":"right so we're doing one at a time","width":230},{"text":"right now we said five threads so this is going to be if our count has gone up to five","width":406},{"text":"cause we're doing it after we've incremented the count","width":153},{"text":"what do we do? we post to sB","width":689},{"text":"this suggests if I want my early threads to wait...","width":465},{"text":"maybe I should set this to zero","width":235},{"text":"because why don't i wait down here","width":547},{"text":"and I'll wait until that count is incremented to one","width":374},{"text":"okay does this code work?","width":198},{"text":"does it let through any threads before the fifth thread arrives?","width":516},{"text":"can any threads get through? if I send it four threads can any of them get through?","width":370},{"text":"where do they get stuck?","width":245},{"text":"yeah the sem_wait waiting for sB so the first four threads get stuck at that line","width":472},{"text":"all waiting for the count to go up by one","width":244},{"text":"but on the fifth thread we call sem_post great we're done right? our code is complete. actually what happens instead?","width":407},{"text":"yeah one thread is lucky","width":246},{"text":"the other four not so much, one thread is going to say great I was able to continue","width":429},{"text":"the other four of course are going to wait forever","width":248},{"text":"but there's something we can do to that one lucky thread","width":250},{"text":"that is going to give us a domino effect right? and that is what?","width":358},{"text":"let's sem_post","width":148},{"text":"so as that thread walks out the door, it bumps up the count again","width":372},{"text":"freeing the next prisoner","width":157},{"text":"that prisoner, that thread walks out, bumps up the count, freeing the next prisoner and so on and so on until we have all five threads have left our barrier","width":822},{"text":"so that's correct code, what would have happened if we had switched these two around?","width":668},{"text":"perhaps you can explain it to your neighbor and decide if your neighbor's explanation is any good","width":1252},{"text":"so what would happen","width":179},{"text":"there's not a barrier anymore, yes, before we called sem_wait we've added one to the count so now every thread will simply get through the moment it arrives so it'd be a useless barrier","width":800},{"text":"alright thanks for playing today's review questions","width":199},{"text":"right so let's talk about some other stuff","width":112},{"text":"first of all Monday I'm leaning towards having no quiz on Monday, no more quizzes","width":633},{"text":"but I'd like to just take a quick survey, if you would like one more quiz this semester on Monday","width":456},{"text":"do this, this way, if you'd like no more quizzes for the rest of the semester... do that","width":502},{"text":"Yes I'll still be dropping three","width":417},{"text":"the last quiz will be a quiz of all possible questions","width":458},{"text":"okay is that sufficient information for you to be able to make up your minds","width":198},{"text":"are you ready? go","width":335},{"text":"[something] has it, there were more people pointing in that direction","width":323},{"text":"so there will not be a quiz next week, no more quizzes","width":423},{"text":"right the next thing we'll talk about yes","width":615},{"text":"you can generate your own quiz simply by concatenating all possible PDFs","width":569},{"text":"okay so let's see we've got...","width":219},{"text":"we've done MP deadlines, streaming sort, oh yes right","width":263},{"text":"section tomorrow, section there is no prep for section, in section you will get your webserver finished","width":495},{"text":"we may add one small little thing to it as well and then the rest of the section time will be spent on MP development and MP finishing","width":506},{"text":"and MP questions","width":111},{"text":"plus there's an opportunity for you to give feedback on section experiences back to your course assistants etc","width":569},{"text":"so please come to section, also please bring your answers to section for points right? to get the four percent, bring your printed copies to section thank you very much","width":719},{"text":"right okay","width":113},{"text":"[silence]","width":836},{"text":"right once upon a time I had some data","width":218},{"text":"and my data arrived in chunks","width":160},{"text":"here it is","width":136},{"text":"there was a little callback that said hey I've got 256 numbers for you","width":281},{"text":"before returning, you have to copy those numbers out into your own area","width":493},{"text":"because by the time you return, that little buffer is going to be overwritten with the next set of numbers","width":351},{"text":"so that's the callback, to be given all of these, unfortunately you didn't know how many times you're going to be called back","width":428},{"text":"other than the fact that to make the MP simpler there was going to be 2^n number down here so it might be 4 6 8 16 32 etc etc etc","width":641}]