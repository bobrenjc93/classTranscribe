[{"text":" morning cs 241. how are you this morning","width":673.1818182468414},{"text":"great. okay. so here's what we're going to do today. we are going to talk about memory allocation","width":342.18181824684143},{"text":"we're going to look at some code that some ta's wrote last semester","width":226.18181824684143},{"text":"and then we're going to jump into a new topic called threads","width":337.18181824684143},{"text":"and this is where we can actually get more than one CPU to work on our process at a time","width":608.1818182468414},{"text":"let's start with this. let's have a look at this code that the TA's wrote","width":330.18181824684143},{"text":"they actually wrote a version of malloc() and free()","width":242.18181824684143},{"text":"i want to show you that it is possible to write some code that works and we'll see how it goes","width":574.1818182468414},{"text":"first we'll define a struct and we use typedef because we're lazy and we don't want to have to keep writing struct everytime we refer to this memory object","width":825.1818182468414},{"text":"and so in the future we can just say metadata_entry_t, that's just a shorthand","width":364.18181824684143},{"text":"typedef is just saying here's an alias","width":175.18181824684143},{"text":"and this is what we're going to have inside our little struct. we have a ptr that we'll be using for the user memory","width":391.18181824684143},{"text":"we want to know how many bytes to use","width":103.18181824684143},{"text":"we want to know are we talking about memory that's currently in use by the program or is it free. is it available for a future malloc()","width":570.1818182468414},{"text":"and finally here is what we're using a linked list so we can walk through these things","width":531.1818182468414},{"text":"so this is going to be our metadata, our information about what memory our malloc() has actually created or freed","width":412.18181824684143},{"text":"and so this will be the beginning of our linkedlist","width":229.18181824684143},{"text":"ok, so now let's have a look at the malloc() implementation","width":256.18181824684143},{"text":"we want to know how many bytes do they want. so we're going to look through our linkedlist and look for the appropriate block that we can reuse","width":821.1818182468414},{"text":"let's walk through our list and we can obviously we only care about entries which are free. we don't want to use a block that is currently in use that's currently been allocated for some purpose","width":605.1818182468414},{"text":"but i've missed out some code here so it's going to be your job to figure out what code is here","width":351.18181824684143},{"text":"also what placement strategy is this using. remember we talked about different strategies in the last lecture","width":588.1818182468414},{"text":"which one is this using and how do we change the code to implement a different placement strategy so you choose a different one and then figure out how to alter it","width":586.1818182468414},{"text":"and then there's more code down here. so what's this second half of the code do","width":271.18181824684143},{"text":"so that's going to be our challenge for the next 5 minutes: what's the missing code","width":263.18181824684143},{"text":"change the strategy that this is using and what does the rest of the code do. why is it doing what it's doing?","width":488.18181824684143},{"text":"and you may also want to have a look at the free() and i'll walk around and answer any quesitons  on this or this week's assignment","width":953.1818182468414},{"text":"silence","width":12169.181818246841}]