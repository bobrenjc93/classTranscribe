[{"text":"so now let's do something exciting","width":256},{"text":"let","width":256},{"text":"let's call fork()","width":128},{"text":"look, I get two different numbers, 188 and 189","width":640},{"text":"I've actually got two processes running","width":192},{"text":"here's what happened: the moment you called fork(), your little process gets temporarily stopped for a nanosecond","width":704},{"text":"CPU's not going to execute anything in your code","width":256},{"text":"and we duplicate it","width":64},{"text":"we now have two nearly identical processes running","width":384},{"text":"and then we'll let them go","width":128},{"text":"so remember when I said, you pull a switch and you get an immediate double ganger","width":320},{"text":"there's immdiately two processes","width":192},{"text":"one thing you've noticed already is that they have different process identifiers","width":384},{"text":"another way that they're different is that one of them is the parent of another","width":384},{"text":"right, let's get that back to result, and let's say...fork gave me the following","width":1472},{"text":"My pid is that","width":576},{"text":"okay, let's run that","width":128},{"text":"so, look at that! I got two processes running at the same time. one of them says \"hey! fork() gave me nothing. it gave me zero. and fork() gave me 203!\"","width":1216},{"text":"so these two processes are now running in slightly different worlds. one of them had a different return value. one of them had a non-zero return value","width":640},{"text":"and in fact, the return value is the child process!","width":192},{"text":"so as a parent, if you wish, you could create a child by forking and then immediately kill it","width":384},{"text":"but I'm not going to show you how to do that today","width":192},{"text":"instead, I'm going to show you what happens when we fork() too me","width":320},{"text":"too much","width":128},{"text":"while 1 is greater than 0","width":576},{"text":"let's print that, let's not return, and let's sleep for one second","width":768},{"text":"just so we can kind of follow what's going on. actually, let's make it two seconds","width":320},{"text":"okay, are you ready? let's see what happens now","width":192},{"text":"okay! I've got two processes. OH! how many have I got now? FOUR processes. now I've got eight processes. now I've got 16. Each process sleeps for a second and then forks. it makes a copies of itself.","width":1152},{"text":"so I've got all these running processes because say, I had 4 of them, and all 4 of them called fork(). oh dear, my system has crashed","width":640},{"text":"alright, eventually, my poor machine of course runs out of memory and it's unable to continue. alright.","width":768},{"text":"so, actually, at this point, the system does its best to preserve itself","width":640},{"text":"it does its best to say \"ahhh, I don't want all these children!\"","width":192},{"text":"I cannot cope","width":64},{"text":"and so it prints out all the debugging information and then decides at random to start killing user processes. the idea being that that's the least bad thing that we could do in this case because we want to preserve the actual main operating system (the kernel running)","width":1280},{"text":"and maybe we'll have a few processes left that are still useful","width":64},{"text":"so let's see if I've even got a- no, I don't got anything do I?","width":320},{"text":"no, it's dead","width":64},{"text":"so that is an example of a fork() bomb. as you can see, it's pretty mean to everybody else that happens to be logged in to the system at the time","width":704},{"text":"so, when you start using forks for the MP, good luck!","width":320},{"text":"and try not to write fork bombs","width":128},{"text":"and with that, we'll finish there and I'll see you on Wednesday!","width":64}]
